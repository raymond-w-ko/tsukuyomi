---- TRACE 1 start tsukuyomi_tokenizer.lua:29
0009  MOV     10   0
0010  TGETS    9   0   1  ; "sub"
0011  MOV     11   8
0012  MOV     12   8
0013  CALL     9   2   4
0000  . FUNCC               ; string.sub
0014  ISNES    9   2      ; """
0015  JMP     10 => 0027
0027  IST          4
0028  JMP     10 => 0036
0036  IST          4
0037  JMP     10 => 0050
0050  GGET    10   3      ; "table"
0051  TGETS   10  10   4  ; "insert"
0052  MOV     11   2
0053  MOV     12   9
0054  CALL    10   1   3
0000  . FUNCC               ; table.insert
0055  FORL     5 => 0009
---- TRACE 1 IR
0001 >  int SLOAD  #7    CRI
0002 >  int LE     0001  +2147483646
0003    int SLOAD  #6    CI
0004 >  str SLOAD  #1    T
0005    int FLOAD  {0x28015d68}  tab.hmask
0006 >  int EQ     0005  +1  
0007    p32 FLOAD  {0x28015d68}  tab.node
0008 >  p32 HREFK  0007  "__index" @1
0009 >  tab HLOAD  0008
0010    int FLOAD  0009  tab.hmask
0011 >  int EQ     0010  +15 
0012    p32 FLOAD  0009  tab.node
0013 >  p32 HREFK  0012  "sub" @15
0014 >  fun HLOAD  0013
0015 >  fun EQ     0014  string.sub
0016    int FLOAD  0004  str.len
0017 >  int UGE    0016  0003
0018    int ADD    0003  -1  
0019 >  int GE     0018  +0  
0020    p32 STRREF 0004  0018
0021    str SNEW   0020  +1  
0022    i8  XLOAD  0020  R
0023 >  int NE     0022  +34 
0024 >  tru SLOAD  #5    T
0025    fun SLOAD  #0    R
0026    tab FLOAD  0025  func.env
0027    int FLOAD  0026  tab.hmask
0028 >  int EQ     0027  +63 
0029    p32 FLOAD  0026  tab.node
0030 >  p32 HREFK  0029  "table" @47
0031 >  tab HLOAD  0030
0032    int FLOAD  0031  tab.hmask
0033 >  int EQ     0032  +15 
0034    p32 FLOAD  0031  tab.node
0035 >  p32 HREFK  0034  "insert" @15
0036 >  fun HLOAD  0035
0037 >  tab SLOAD  #3    T
0038 >  fun EQ     0036  table.insert
0039    int CALLL  lj_tab_len  (0037)
0040    int ADD    0039  +1  
0041    int FLOAD  0037  tab.asize
0042 >  int ABC    0041  0040
0043    p32 FLOAD  0037  tab.array
0044    p32 AREF   0043  0040
0045    str ASTORE 0044  0021
0046    nil TBAR   0037
0047  + int ADD    0003  +1  
0048 >  int LE     0047  0001
0049 ------ LOOP ------------
0050 >  int ULE    0047  0016
0051    int ADD    0047  -1  
0052 >  int GE     0051  +0  
0053    p32 STRREF 0004  0051
0054    str SNEW   0053  +1  
0055    i8  XLOAD  0053  R
0056 >  int NE     0055  +34 
0057    int CALLL  lj_tab_len  (0037)
0058    int ADD    0057  +1  
0059 >  int ABC    0041  0058
0060    p32 AREF   0043  0058
0061    str ASTORE 0060  0054
0062    nil TBAR   0037
0063  + int ADD    0047  +1  
0064 >  int LE     0063  0001
0065    int PHI    0047  0063
---- TRACE 1 mcode 732
7ffc0691fd24  add rsp, -0x10
7ffc0691fd28  mov dword [0x28010410], 0x1
7ffc0691fd33  mov ecx, [0x280103d8]
7ffc0691fd3a  cmp ecx, [0x280103dc]
7ffc0691fd41  jb 0x7ffc0691fd5a
7ffc0691fd43  mov edx, 0x1
7ffc0691fd48  mov ecx, 0x280103b8
7ffc0691fd4d  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691fd52  test eax, eax
7ffc0691fd54  jnz 0x7ffc06910010	->0
7ffc0691fd5a  mov edx, [0x280104b4]
7ffc0691fd61  mov ecx, [0x280104b0]
7ffc0691fd68  movsd xmm7, [rdx+0x30]
7ffc0691fd6d  cvttsd2si ebx, xmm7
7ffc0691fd71  xorps xmm6, xmm6
7ffc0691fd74  cvtsi2sd xmm6, ebx
7ffc0691fd78  ucomisd xmm7, xmm6
7ffc0691fd7c  jnz 0x7ffc06910010	->0
7ffc0691fd82  jpe 0x7ffc06910010	->0
7ffc0691fd88  cmp ebx, 0x7ffffffe
7ffc0691fd8e  jg 0x7ffc06910010	->0
7ffc0691fd94  cvttsd2si edi, [rdx+0x28]
7ffc0691fd99  cmp dword [rdx+0x4], -0x05
7ffc0691fd9d  jnz 0x7ffc06910010	->0
7ffc0691fda3  mov r14d, [rdx]
7ffc0691fda6  cmp dword [0x28015d84], +0x01
7ffc0691fdae  jnz 0x7ffc06910010	->0
7ffc0691fdb4  mov eax, [0x28015d7c]
7ffc0691fdbb  mov rsi, 0xfffffffb28012458
7ffc0691fdc5  cmp rsi, [rax+0x20]
7ffc0691fdc9  jnz 0x7ffc06910010	->0
7ffc0691fdcf  cmp dword [rax+0x1c], -0x0c
7ffc0691fdd3  jnz 0x7ffc06910010	->0
7ffc0691fdd9  mov eax, [rax+0x18]
7ffc0691fddc  cmp dword [rax+0x1c], +0x0f
7ffc0691fde0  jnz 0x7ffc06910010	->0
7ffc0691fde6  mov eax, [rax+0x14]
7ffc0691fde9  mov rsi, 0xfffffffb28015a58
7ffc0691fdf3  cmp rsi, [rax+0x170]
7ffc0691fdfa  jnz 0x7ffc06910010	->0
7ffc0691fe00  cmp dword [rax+0x16c], -0x09
7ffc0691fe07  jnz 0x7ffc06910010	->0
7ffc0691fe0d  cmp dword [rax+0x168], 0x28015a30
7ffc0691fe17  jnz 0x7ffc06910010	->0
7ffc0691fe1d  mov r15d, [r14+0xc]
7ffc0691fe21  cmp edi, r15d
7ffc0691fe24  ja 0x7ffc06910010	->0
7ffc0691fe2a  mov eax, edi
7ffc0691fe2c  add eax, -0x01
7ffc0691fe2f  mov [rsp+0x28], eax
7ffc0691fe33  jl 0x7ffc06910010	->0
7ffc0691fe39  lea edx, [r14+rax+0x10]
7ffc0691fe3e  mov r8d, 0x1
7ffc0691fe44  call 0x7ffc1570b2b0	->lj_str_new
7ffc0691fe49  mov [rsp+0x24], eax
7ffc0691fe4d  mov edx, [0x280104b4]
7ffc0691fe54  mov eax, [rsp+0x28]
7ffc0691fe58  cmp byte [r14+rax+0x10], 0x22
7ffc0691fe5e  jz 0x7ffc06910014	->1
7ffc0691fe64  cmp dword [rdx+0x24], -0x03
7ffc0691fe68  jnz 0x7ffc06910018	->2
7ffc0691fe6e  mov eax, [rdx-0x8]
7ffc0691fe71  mov eax, [rax+0x8]
7ffc0691fe74  cmp dword [rax+0x1c], +0x3f
7ffc0691fe78  jnz 0x7ffc06910018	->2
7ffc0691fe7e  mov eax, [rax+0x14]
7ffc0691fe81  mov rsi, 0xfffffffb28012e68
7ffc0691fe8b  cmp rsi, [rax+0x470]
7ffc0691fe92  jnz 0x7ffc06910018	->2
7ffc0691fe98  cmp dword [rax+0x46c], -0x0c
7ffc0691fe9f  jnz 0x7ffc06910018	->2
7ffc0691fea5  mov eax, [rax+0x468]
7ffc0691feab  cmp dword [rax+0x1c], +0x0f
7ffc0691feaf  jnz 0x7ffc06910018	->2
7ffc0691feb5  mov eax, [rax+0x14]
7ffc0691feb8  mov rsi, 0xfffffffb28014670
7ffc0691fec2  cmp rsi, [rax+0x170]
7ffc0691fec9  jnz 0x7ffc06910018	->2
7ffc0691fecf  cmp dword [rax+0x16c], -0x09
7ffc0691fed6  jnz 0x7ffc06910018	->2
7ffc0691fedc  cmp dword [rdx+0x14], -0x0c
7ffc0691fee0  jnz 0x7ffc06910018	->2
7ffc0691fee6  mov ebp, [rdx+0x10]
7ffc0691fee9  cmp dword [rax+0x168], 0x28014648
7ffc0691fef3  jnz 0x7ffc06910018	->2
7ffc0691fef9  mov ecx, ebp
7ffc0691fefb  call 0x7ffc1570de20	->lj_tab_len
7ffc0691ff00  mov ecx, eax
7ffc0691ff02  mov eax, [rsp+0x24]
7ffc0691ff06  add ecx, +0x01
7ffc0691ff09  mov r13d, [rbp+0x18]
7ffc0691ff0d  cmp ecx, r13d
7ffc0691ff10  jnb 0x7ffc06910018	->2
7ffc0691ff16  mov r12d, [rbp+0x8]
7ffc0691ff1a  mov dword [r12+rcx*8+0x4], 0xfffffffb
7ffc0691ff23  mov [r12+rcx*8], eax
7ffc0691ff27  test byte [rbp+0x4], 0x4
7ffc0691ff2b  jz 0x7ffc0691ff42
7ffc0691ff2d  and byte [rbp+0x4], 0xfb
7ffc0691ff31  mov esi, [0x280103f4]
7ffc0691ff38  mov [0x280103f4], ebp
7ffc0691ff3f  mov [rbp+0xc], esi
7ffc0691ff42  add edi, +0x01
7ffc0691ff45  cmp edi, ebx
7ffc0691ff47  jg 0x7ffc0691001c	->3
->LOOP:
7ffc0691ff4d  mov ecx, [0x280103d8]
7ffc0691ff54  cmp ecx, [0x280103dc]
7ffc0691ff5b  jb 0x7ffc0691ff74
7ffc0691ff5d  mov edx, 0x1
7ffc0691ff62  mov ecx, 0x280103b8
7ffc0691ff67  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691ff6c  test eax, eax
7ffc0691ff6e  jnz 0x7ffc06910020	->4
7ffc0691ff74  mov ecx, [0x280104b0]
7ffc0691ff7b  cmp edi, r15d
7ffc0691ff7e  ja 0x7ffc06910020	->4
7ffc0691ff84  mov esi, edi
7ffc0691ff86  add esi, -0x01
7ffc0691ff89  jl 0x7ffc06910020	->4
7ffc0691ff8f  lea edx, [r14+rsi+0x10]
7ffc0691ff94  mov r8d, 0x1
7ffc0691ff9a  call 0x7ffc1570b2b0	->lj_str_new
7ffc0691ff9f  mov [rsp+0x20], eax
7ffc0691ffa3  cmp byte [r14+rsi+0x10], 0x22
7ffc0691ffa9  jz 0x7ffc06910024	->5
7ffc0691ffaf  mov ecx, ebp
7ffc0691ffb1  call 0x7ffc1570de20	->lj_tab_len
7ffc0691ffb6  mov esi, eax
7ffc0691ffb8  mov eax, [rsp+0x20]
7ffc0691ffbc  add esi, +0x01
7ffc0691ffbf  cmp esi, r13d
7ffc0691ffc2  jnb 0x7ffc06910028	->6
7ffc0691ffc8  mov dword [r12+rsi*8+0x4], 0xfffffffb
7ffc0691ffd1  mov [r12+rsi*8], eax
7ffc0691ffd5  test byte [rbp+0x4], 0x4
7ffc0691ffd9  jz 0x7ffc0691fff0
7ffc0691ffdb  and byte [rbp+0x4], 0xfb
7ffc0691ffdf  mov esi, [0x280103f4]
7ffc0691ffe6  mov [0x280103f4], ebp
7ffc0691ffed  mov [rbp+0xc], esi
7ffc0691fff0  add edi, +0x01
7ffc0691fff3  cmp edi, ebx
7ffc0691fff5  jle 0x7ffc0691ff4d	->LOOP
7ffc0691fffb  jmp 0x7ffc0691002c	->7
---- TRACE 1 stop -> loop

---- TRACE 2 start 1/2 tsukuyomi_tokenizer.lua:38
0027  IST          4
0028  JMP     10 => 0036
0029  UGET    10   0      ; kWhitespaces
0030  TGETV   10  10   9
0031  ISF         10
0032  JMP     11 => 0036
0036  IST          4
0037  JMP     10 => 0050
0038  UGET    10   1      ; kDelimiters
0039  TGETV   10  10   9
0040  ISF         10
0041  JMP     11 => 0050
0050  GGET    10   3      ; "table"
0051  TGETS   10  10   4  ; "insert"
0052  MOV     11   2
0053  MOV     12   9
0054  CALL    10   1   3
0000  . FUNCC               ; table.insert
0055  JFORL    5   1
---- TRACE 2 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004 >  fal SLOAD  #5    T
0005    fun SLOAD  #0    R
0006 >  p32 UREFC  0005  #0  
0007 >  tab ULOAD  0006
0008    p32 HREF   0007  0003
0009 >  p32 EQ     0008  [0x28010458]
0010    tab FLOAD  0007  tab.meta
0011 >  tab EQ     0010  [NULL]
0012 >  p32 UREFC  0005  #1  
0013 >  tab ULOAD  0012
0014    p32 HREF   0013  0003
0015 >  p32 EQ     0014  [0x28010458]
0016    tab FLOAD  0013  tab.meta
0017 >  tab EQ     0016  [NULL]
0018    tab FLOAD  0005  func.env
0019    int FLOAD  0018  tab.hmask
0020 >  int EQ     0019  +63 
0021    p32 FLOAD  0018  tab.node
0022 >  p32 HREFK  0021  "table" @47
0023 >  tab HLOAD  0022
0024    int FLOAD  0023  tab.hmask
0025 >  int EQ     0024  +15 
0026    p32 FLOAD  0023  tab.node
0027 >  p32 HREFK  0026  "insert" @15
0028 >  fun HLOAD  0027
0029 >  tab SLOAD  #3    T
0030 >  fun EQ     0028  table.insert
0031    int CALLL  lj_tab_len  (0029)
0032    int ADD    0031  +1  
0033    int FLOAD  0029  tab.asize
0034 >  int ULE    0033  0032
0035    int FLOAD  0029  tab.hmask
0036 >  int EQ     0035  +0  
0037    num CONV   0032  num.int
0038    p32 NEWREF 0029  0037
0039    str HSTORE 0038  0003
0040    nil TBAR   0029
0041    int ADD    0001  +1  
0042 >  int LE     0041  0002
0043    num CONV   0041  num.int
---- TRACE 2 mcode 484
7ffc0691fb3d  mov ebp, [rsp+0x24]
7ffc0691fb41  mov dword [0x28010410], 0x2
7ffc0691fb4c  mov edx, [0x280104b4]
7ffc0691fb53  cmp dword [rdx+0x24], -0x02
7ffc0691fb57  jnz 0x7ffc06910010	->0
7ffc0691fb5d  mov esi, [rdx-0x8]
7ffc0691fb60  mov ecx, [rsi+0x14]
7ffc0691fb63  cmp byte [rcx+0x6], 0x1
7ffc0691fb67  jnz 0x7ffc06910010	->0
7ffc0691fb6d  lea r15d, [rcx+0x8]
7ffc0691fb71  cmp dword [r15+0x4], -0x0c
7ffc0691fb76  jnz 0x7ffc06910010	->0
7ffc0691fb7c  mov r15d, [r15]
7ffc0691fb7f  mov ecx, [r15+0x1c]
7ffc0691fb83  and ecx, [rbp+0x8]
7ffc0691fb86  lea ecx, [rcx+rcx*2]
7ffc0691fb89  shl ecx, 0x03
7ffc0691fb8c  add ecx, [r15+0x14]
7ffc0691fb90  cmp dword [rcx+0xc], -0x05
7ffc0691fb94  jnz 0x7ffc0691fb9f
7ffc0691fb96  cmp ebp, [rcx+0x8]
7ffc0691fb99  jz 0x7ffc06910010	->0
7ffc0691fb9f  mov ecx, [rcx+0x10]
7ffc0691fba2  test ecx, ecx
7ffc0691fba4  jnz 0x7ffc0691fb90
7ffc0691fba6  cmp dword [r15+0x10], +0x00
7ffc0691fbab  jnz 0x7ffc06910010	->0
7ffc0691fbb1  mov ecx, [rsi+0x18]
7ffc0691fbb4  cmp byte [rcx+0x6], 0x1
7ffc0691fbb8  jnz 0x7ffc06910010	->0
7ffc0691fbbe  lea r15d, [rcx+0x8]
7ffc0691fbc2  cmp dword [r15+0x4], -0x0c
7ffc0691fbc7  jnz 0x7ffc06910010	->0
7ffc0691fbcd  mov r15d, [r15]
7ffc0691fbd0  mov ecx, [r15+0x1c]
7ffc0691fbd4  and ecx, [rbp+0x8]
7ffc0691fbd7  lea ecx, [rcx+rcx*2]
7ffc0691fbda  shl ecx, 0x03
7ffc0691fbdd  add ecx, [r15+0x14]
7ffc0691fbe1  cmp dword [rcx+0xc], -0x05
7ffc0691fbe5  jnz 0x7ffc0691fbf0
7ffc0691fbe7  cmp ebp, [rcx+0x8]
7ffc0691fbea  jz 0x7ffc06910010	->0
7ffc0691fbf0  mov ecx, [rcx+0x10]
7ffc0691fbf3  test ecx, ecx
7ffc0691fbf5  jnz 0x7ffc0691fbe1
7ffc0691fbf7  cmp dword [r15+0x10], +0x00
7ffc0691fbfc  jnz 0x7ffc06910010	->0
7ffc0691fc02  mov esi, [rsi+0x8]
7ffc0691fc05  cmp dword [rsi+0x1c], +0x3f
7ffc0691fc09  jnz 0x7ffc06910010	->0
7ffc0691fc0f  mov esi, [rsi+0x14]
7ffc0691fc12  mov rcx, 0xfffffffb28012e68
7ffc0691fc1c  cmp rcx, [rsi+0x470]
7ffc0691fc23  jnz 0x7ffc06910010	->0
7ffc0691fc29  cmp dword [rsi+0x46c], -0x0c
7ffc0691fc30  jnz 0x7ffc06910010	->0
7ffc0691fc36  mov esi, [rsi+0x468]
7ffc0691fc3c  cmp dword [rsi+0x1c], +0x0f
7ffc0691fc40  jnz 0x7ffc06910010	->0
7ffc0691fc46  mov r15d, [rsi+0x14]
7ffc0691fc4a  mov rsi, 0xfffffffb28014670
7ffc0691fc54  cmp rsi, [r15+0x170]
7ffc0691fc5b  jnz 0x7ffc06910010	->0
7ffc0691fc61  cmp dword [r15+0x16c], -0x09
7ffc0691fc69  jnz 0x7ffc06910010	->0
7ffc0691fc6f  cmp dword [rdx+0x14], -0x0c
7ffc0691fc73  jnz 0x7ffc06910010	->0
7ffc0691fc79  mov esi, [rdx+0x10]
7ffc0691fc7c  cmp dword [r15+0x168], 0x28014648
7ffc0691fc87  jnz 0x7ffc06910010	->0
7ffc0691fc8d  mov ecx, esi
7ffc0691fc8f  call 0x7ffc1570de20	->lj_tab_len
7ffc0691fc94  mov ecx, [0x280104b0]
7ffc0691fc9b  add eax, +0x01
7ffc0691fc9e  cmp eax, [rsi+0x18]
7ffc0691fca1  jb 0x7ffc06910010	->0
7ffc0691fca7  cmp dword [rsi+0x1c], +0x00
7ffc0691fcab  jnz 0x7ffc06910010	->0
7ffc0691fcb1  xorps xmm7, xmm7
7ffc0691fcb4  cvtsi2sd xmm7, eax
7ffc0691fcb8  movsd [rsp+0x20], xmm7
7ffc0691fcbe  lea r8, [rsp+0x20]
7ffc0691fcc3  mov edx, esi
7ffc0691fcc5  call 0x7ffc1570dfd0	->lj_tab_newkey
7ffc0691fcca  mov edx, [0x280104b4]
7ffc0691fcd1  mov dword [rax+0x4], 0xfffffffb
7ffc0691fcd8  mov [rax], ebp
7ffc0691fcda  test byte [rsi+0x4], 0x4
7ffc0691fcde  jz 0x7ffc0691fcf5
7ffc0691fce0  and byte [rsi+0x4], 0xfb
7ffc0691fce4  mov ebp, [0x280103f4]
7ffc0691fceb  mov [0x280103f4], esi
7ffc0691fcf2  mov [rsi+0xc], ebp
7ffc0691fcf5  add edi, +0x01
7ffc0691fcf8  cmp edi, ebx
7ffc0691fcfa  jg 0x7ffc06910014	->1
7ffc0691fd00  xorps xmm7, xmm7
7ffc0691fd03  cvtsi2sd xmm7, edi
7ffc0691fd07  movsd [rdx+0x40], xmm7
7ffc0691fd0c  movsd [rdx+0x28], xmm7
7ffc0691fd11  mov dword [rdx+0x24], 0xfffffffe
7ffc0691fd18  add rsp, +0x10
7ffc0691fd1c  jmp 0x7ffc0691fd24
---- TRACE 2 stop -> 1

---- TRACE 3 start 2/0 tsukuyomi_tokenizer.lua:38
0027  IST          4
0028  JMP     10 => 0036
0029  UGET    10   0      ; kWhitespaces
0030  TGETV   10  10   9
0031  ISF         10
0032  JMP     11 => 0036
0033  MOV     10   3
0034  CALL    10   1   1
0000  . FUNCF    4          ; tsukuyomi_tokenizer.lua:19
0001  . UGET     0   0      ; word_bucket
0002  . LEN      0   0
0003  . KSHORT   1   0
0004  . ISGE     1   0
0005  . JMP      0 => 0017
0006  . GGET     0   0      ; "table"
0007  . TGETS    0   0   1  ; "concat"
0008  . UGET     1   0      ; word_bucket
0009  . CALL     0   2   2
0000  . . FUNCC               ; table.concat
0010  . GGET     1   0      ; "table"
0011  . TGETS    1   1   2  ; "insert"
0012  . UGET     2   1      ; tokens
0013  . MOV      3   0
0014  . CALL     1   1   3
0000  . . FUNCC               ; table.insert
0015  . TNEW     1   0
0016  . USETV    0   1      ; word_bucket
0017  . RET0     0   1
0035  JMP     10 => 0055
0055  JFORL    5   1
---- TRACE 3 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004 >  fal SLOAD  #5    T
0005    fun SLOAD  #0    R
0006 >  p32 UREFC  0005  #0  
0007 >  tab ULOAD  0006
0008    p32 HREF   0007  0003
0009 >  tru HLOAD  0008
0010 >  fun SLOAD  #4    T
0011 >  fun EQ     0010  tsukuyomi_tokenizer.lua:19
0012 >  tab SLOAD  #3    T
0013    int CALLL  lj_tab_len  (0012)
0014 >  int GT     0013  +0  
0015    tab FLOAD  tsukuyomi_tokenizer.lua:19  func.env
0016    int FLOAD  0015  tab.hmask
0017 >  int EQ     0016  +63 
0018    p32 FLOAD  0015  tab.node
0019 >  p32 HREFK  0018  "table" @47
0020 >  tab HLOAD  0019
0021    int FLOAD  0020  tab.hmask
0022 >  int EQ     0021  +15 
0023    p32 FLOAD  0020  tab.node
0024 >  p32 HREFK  0023  "concat" @14
0025 >  fun HLOAD  0024
0026 >  fun EQ     0025  table.concat
0027    p32 BUFHDR [0x28010414]  RESET
0032    p32 CALLL  lj_buf_puttab  (0027 0012 [NULL] +1   0013)
0033 >  p64 NE     0032  [NULL]
0034    str BUFSTR 0032  0027
0035 >  p32 HREFK  0023  "insert" @15
0036 >  fun HLOAD  0035
0037 >  tab SLOAD  #2    T
0038 >  fun EQ     0036  table.insert
0039    int CALLL  lj_tab_len  (0037)
0040    int ADD    0039  +1  
0041    int FLOAD  0037  tab.asize
0042 >  int ABC    0041  0040
0043    p32 FLOAD  0037  tab.array
0044    p32 AREF   0043  0040
0045    str ASTORE 0044  0034
0046    nil TBAR   0037
0047 >  tab TNEW   #0    #0  
0048    int ADD    0001  +1  
0049 >  int LE     0048  0002
0050    num CONV   0048  num.int
---- TRACE 3 mcode 609
7ffc0691f8d9  mov dword [0x28010410], 0x3
7ffc0691f8e4  mov ecx, [0x280103d8]
7ffc0691f8eb  cmp ecx, [0x280103dc]
7ffc0691f8f2  jb 0x7ffc0691f90b
7ffc0691f8f4  mov edx, 0x2
7ffc0691f8f9  mov ecx, 0x280103b8
7ffc0691f8fe  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691f903  test eax, eax
7ffc0691f905  jnz 0x7ffc06910010	->0
7ffc0691f90b  mov edx, [0x280104b4]
7ffc0691f912  cmp dword [rdx+0x24], -0x02
7ffc0691f916  jnz 0x7ffc06910010	->0
7ffc0691f91c  mov esi, [rdx-0x8]
7ffc0691f91f  mov esi, [rsi+0x14]
7ffc0691f922  cmp byte [rsi+0x6], 0x1
7ffc0691f926  jnz 0x7ffc06910010	->0
7ffc0691f92c  lea esi, [rsi+0x8]
7ffc0691f92f  cmp dword [rsi+0x4], -0x0c
7ffc0691f933  jnz 0x7ffc06910010	->0
7ffc0691f939  mov r15d, [rsi]
7ffc0691f93c  mov esi, [r15+0x1c]
7ffc0691f940  and esi, [rbp+0x8]
7ffc0691f943  lea esi, [rsi+rsi*2]
7ffc0691f946  shl esi, 0x03
7ffc0691f949  add esi, [r15+0x14]
7ffc0691f94d  cmp dword [rsi+0xc], -0x05
7ffc0691f951  jnz 0x7ffc0691f958
7ffc0691f953  cmp ebp, [rsi+0x8]
7ffc0691f956  jz 0x7ffc0691f964
7ffc0691f958  mov esi, [rsi+0x10]
7ffc0691f95b  test esi, esi
7ffc0691f95d  jnz 0x7ffc0691f94d
7ffc0691f95f  mov esi, 0x28010458
7ffc0691f964  cmp dword [rsi+0x4], -0x03
7ffc0691f968  jnz 0x7ffc06910010	->0
7ffc0691f96e  cmp dword [rdx+0x1c], -0x09
7ffc0691f972  jnz 0x7ffc06910010	->0
7ffc0691f978  cmp dword [rdx+0x18], 0x28039ae8
7ffc0691f97f  jnz 0x7ffc06910010	->0
7ffc0691f985  cmp dword [rdx+0x14], -0x0c
7ffc0691f989  jnz 0x7ffc06910010	->0
7ffc0691f98f  mov ecx, [rdx+0x10]
7ffc0691f992  mov [rsp+0x2c], ecx
7ffc0691f996  call 0x7ffc1570de20	->lj_tab_len
7ffc0691f99b  mov edx, [rsp+0x2c]
7ffc0691f99f  test eax, eax
7ffc0691f9a1  jle 0x7ffc06910014	->1
7ffc0691f9a7  mov esi, [0x28039af0]
7ffc0691f9ae  cmp dword [rsi+0x1c], +0x3f
7ffc0691f9b2  jnz 0x7ffc06910018	->2
7ffc0691f9b8  mov esi, [rsi+0x14]
7ffc0691f9bb  mov rcx, 0xfffffffb28012e68
7ffc0691f9c5  cmp rcx, [rsi+0x470]
7ffc0691f9cc  jnz 0x7ffc06910018	->2
7ffc0691f9d2  cmp dword [rsi+0x46c], -0x0c
7ffc0691f9d9  jnz 0x7ffc06910018	->2
7ffc0691f9df  mov esi, [rsi+0x468]
7ffc0691f9e5  cmp dword [rsi+0x1c], +0x0f
7ffc0691f9e9  jnz 0x7ffc06910018	->2
7ffc0691f9ef  mov r15d, [rsi+0x14]
7ffc0691f9f3  mov rsi, 0xfffffffb280147d0
7ffc0691f9fd  cmp rsi, [r15+0x158]
7ffc0691fa04  jnz 0x7ffc06910018	->2
7ffc0691fa0a  cmp dword [r15+0x154], -0x09
7ffc0691fa12  jnz 0x7ffc06910018	->2
7ffc0691fa18  cmp dword [r15+0x150], 0x280147a8
7ffc0691fa23  jnz 0x7ffc06910018	->2
7ffc0691fa29  mov ecx, 0x28010414
7ffc0691fa2e  mov esi, [rcx+0x8]
7ffc0691fa31  mov [rcx], esi
7ffc0691fa33  mov [rsp+0x20], rax
7ffc0691fa38  mov r9d, 0x1
7ffc0691fa3e  xor r8d, r8d
7ffc0691fa41  call 0x7ffc156d6660	->lj_buf_puttab
7ffc0691fa46  mov ecx, eax
7ffc0691fa48  test rcx, rcx
7ffc0691fa4b  jz 0x7ffc06910018	->2
7ffc0691fa51  call 0x7ffc156d6880	->lj_buf_tostr
7ffc0691fa56  mov [rsp+0x28], eax
7ffc0691fa5a  mov edx, [0x280104b4]
7ffc0691fa61  mov rsi, 0xfffffffb28014670
7ffc0691fa6b  cmp rsi, [r15+0x170]
7ffc0691fa72  jnz 0x7ffc06910018	->2
7ffc0691fa78  cmp dword [r15+0x16c], -0x09
7ffc0691fa80  jnz 0x7ffc06910018	->2
7ffc0691fa86  cmp dword [rdx+0xc], -0x0c
7ffc0691fa8a  jnz 0x7ffc06910018	->2
7ffc0691fa90  mov esi, [rdx+0x8]
7ffc0691fa93  cmp dword [r15+0x168], 0x28014648
7ffc0691fa9e  jnz 0x7ffc06910018	->2
7ffc0691faa4  mov ecx, esi
7ffc0691faa6  call 0x7ffc1570de20	->lj_tab_len
7ffc0691faab  mov r15d, eax
7ffc0691faae  mov ecx, [0x280104b0]
7ffc0691fab5  mov eax, [rsp+0x28]
7ffc0691fab9  mov r14d, r15d
7ffc0691fabc  add r14d, +0x01
7ffc0691fac0  cmp r14d, [rsi+0x18]
7ffc0691fac4  jnb 0x7ffc06910018	->2
7ffc0691faca  mov r15d, [rsi+0x8]
7ffc0691face  mov dword [r15+r14*8+0x4], 0xfffffffb
7ffc0691fad7  mov [r15+r14*8], eax
7ffc0691fadb  test byte [rsi+0x4], 0x4
7ffc0691fadf  jz 0x7ffc0691faf6
7ffc0691fae1  and byte [rsi+0x4], 0xfb
7ffc0691fae5  mov edx, [0x280103f4]
7ffc0691faec  mov [0x280103f4], esi
7ffc0691faf3  mov [rsi+0xc], edx
7ffc0691faf6  xor edx, edx
7ffc0691faf8  call 0x7ffc1570df10	->lj_tab_new1
7ffc0691fafd  mov edx, [0x280104b4]
7ffc0691fb04  add edi, +0x01
7ffc0691fb07  cmp edi, ebx
7ffc0691fb09  jg 0x7ffc06910020	->4
7ffc0691fb0f  xorps xmm7, xmm7
7ffc0691fb12  cvtsi2sd xmm7, edi
7ffc0691fb16  movsd [rdx+0x40], xmm7
7ffc0691fb1b  movsd [rdx+0x28], xmm7
7ffc0691fb20  mov dword [rdx+0x24], 0xfffffffe
7ffc0691fb27  mov dword [rdx+0x14], 0xfffffff4
7ffc0691fb2e  mov [rdx+0x10], eax
7ffc0691fb31  add rsp, +0x10
7ffc0691fb35  jmp 0x7ffc0691fd24
---- TRACE 3 stop -> 1

---- TRACE 4 start 3/0 tsukuyomi_tokenizer.lua:38
0027  IST          4
0028  JMP     10 => 0036
0029  UGET    10   0      ; kWhitespaces
0030  TGETV   10  10   9
0031  ISF         10
0032  JMP     11 => 0036
0036  IST          4
0037  JMP     10 => 0050
0038  UGET    10   1      ; kDelimiters
0039  TGETV   10  10   9
0040  ISF         10
0041  JMP     11 => 0050
0042  MOV     10   3
0043  CALL    10   1   1
0000  . FUNCF    4          ; tsukuyomi_tokenizer.lua:19
0001  . UGET     0   0      ; word_bucket
0002  . LEN      0   0
0003  . KSHORT   1   0
0004  . ISGE     1   0
0005  . JMP      0 => 0017
0017  . RET0     0   1
0044  GGET    10   3      ; "table"
0045  TGETS   10  10   4  ; "insert"
0046  MOV     11   1
0047  MOV     12   9
0048  CALL    10   1   3
0000  . FUNCC               ; table.insert
0049  JMP     10 => 0055
0055  JFORL    5   1
---- TRACE 4 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004 >  fal SLOAD  #5    T
0005    fun SLOAD  #0    R
0006 >  p32 UREFC  0005  #0  
0007 >  tab ULOAD  0006
0008    p32 HREF   0007  0003
0009 >  p32 EQ     0008  [0x28010458]
0010    tab FLOAD  0007  tab.meta
0011 >  tab EQ     0010  [NULL]
0012 >  p32 UREFC  0005  #1  
0013 >  tab ULOAD  0012
0014    p32 HREF   0013  0003
0015 >  tru HLOAD  0014
0016 >  fun SLOAD  #4    T
0017 >  fun EQ     0016  tsukuyomi_tokenizer.lua:19
0018 >  tab SLOAD  #3    T
0019    int CALLL  lj_tab_len  (0018)
0020 >  int LE     0019  +0  
0021    tab FLOAD  0005  func.env
0022    int FLOAD  0021  tab.hmask
0023 >  int EQ     0022  +63 
0024    p32 FLOAD  0021  tab.node
0025 >  p32 HREFK  0024  "table" @47
0026 >  tab HLOAD  0025
0027    int FLOAD  0026  tab.hmask
0028 >  int EQ     0027  +15 
0029    p32 FLOAD  0026  tab.node
0030 >  p32 HREFK  0029  "insert" @15
0031 >  fun HLOAD  0030
0032 >  tab SLOAD  #2    T
0033 >  fun EQ     0031  table.insert
0034    int CALLL  lj_tab_len  (0032)
0035    int ADD    0034  +1  
0036    int FLOAD  0032  tab.asize
0037 >  int ABC    0036  0035
0038    p32 FLOAD  0032  tab.array
0039    p32 AREF   0038  0035
0040    str ASTORE 0039  0003
0041    nil TBAR   0032
0042    int ADD    0001  +1  
0043 >  int LE     0042  0002
0044    num CONV   0042  num.int
---- TRACE 4 mcode 511
7ffc0691f6d7  mov dword [0x28010410], 0x4
7ffc0691f6e2  mov edx, [0x280104b4]
7ffc0691f6e9  cmp dword [rdx+0x24], -0x02
7ffc0691f6ed  jnz 0x7ffc06910010	->0
7ffc0691f6f3  mov esi, [rdx-0x8]
7ffc0691f6f6  mov ecx, [rsi+0x14]
7ffc0691f6f9  cmp byte [rcx+0x6], 0x1
7ffc0691f6fd  jnz 0x7ffc06910010	->0
7ffc0691f703  lea r15d, [rcx+0x8]
7ffc0691f707  cmp dword [r15+0x4], -0x0c
7ffc0691f70c  jnz 0x7ffc06910010	->0
7ffc0691f712  mov r15d, [r15]
7ffc0691f715  mov ecx, [r15+0x1c]
7ffc0691f719  and ecx, [rbp+0x8]
7ffc0691f71c  lea ecx, [rcx+rcx*2]
7ffc0691f71f  shl ecx, 0x03
7ffc0691f722  add ecx, [r15+0x14]
7ffc0691f726  cmp dword [rcx+0xc], -0x05
7ffc0691f72a  jnz 0x7ffc0691f735
7ffc0691f72c  cmp ebp, [rcx+0x8]
7ffc0691f72f  jz 0x7ffc06910010	->0
7ffc0691f735  mov ecx, [rcx+0x10]
7ffc0691f738  test ecx, ecx
7ffc0691f73a  jnz 0x7ffc0691f726
7ffc0691f73c  cmp dword [r15+0x10], +0x00
7ffc0691f741  jnz 0x7ffc06910010	->0
7ffc0691f747  mov ecx, [rsi+0x18]
7ffc0691f74a  cmp byte [rcx+0x6], 0x1
7ffc0691f74e  jnz 0x7ffc06910010	->0
7ffc0691f754  lea r15d, [rcx+0x8]
7ffc0691f758  cmp dword [r15+0x4], -0x0c
7ffc0691f75d  jnz 0x7ffc06910010	->0
7ffc0691f763  mov r14d, [r15]
7ffc0691f766  mov r15d, [r14+0x1c]
7ffc0691f76a  and r15d, [rbp+0x8]
7ffc0691f76e  lea r15d, [r15+r15*2]
7ffc0691f772  shl r15d, 0x03
7ffc0691f776  add r15d, [r14+0x14]
7ffc0691f77a  cmp dword [r15+0xc], -0x05
7ffc0691f77f  jnz 0x7ffc0691f787
7ffc0691f781  cmp ebp, [r15+0x8]
7ffc0691f785  jz 0x7ffc0691f796
7ffc0691f787  mov r15d, [r15+0x10]
7ffc0691f78b  test r15d, r15d
7ffc0691f78e  jnz 0x7ffc0691f77a
7ffc0691f790  mov r15d, 0x28010458
7ffc0691f796  cmp dword [r15+0x4], -0x03
7ffc0691f79b  jnz 0x7ffc06910010	->0
7ffc0691f7a1  cmp dword [rdx+0x1c], -0x09
7ffc0691f7a5  jnz 0x7ffc06910010	->0
7ffc0691f7ab  cmp dword [rdx+0x18], 0x28039ae8
7ffc0691f7b2  jnz 0x7ffc06910010	->0
7ffc0691f7b8  cmp dword [rdx+0x14], -0x0c
7ffc0691f7bc  jnz 0x7ffc06910010	->0
7ffc0691f7c2  mov ecx, [rdx+0x10]
7ffc0691f7c5  call 0x7ffc1570de20	->lj_tab_len
7ffc0691f7ca  mov edx, [0x280104b4]
7ffc0691f7d1  test eax, eax
7ffc0691f7d3  jg 0x7ffc06910014	->1
7ffc0691f7d9  mov esi, [rsi+0x8]
7ffc0691f7dc  cmp dword [rsi+0x1c], +0x3f
7ffc0691f7e0  jnz 0x7ffc06910018	->2
7ffc0691f7e6  mov esi, [rsi+0x14]
7ffc0691f7e9  mov rcx, 0xfffffffb28012e68
7ffc0691f7f3  cmp rcx, [rsi+0x470]
7ffc0691f7fa  jnz 0x7ffc06910018	->2
7ffc0691f800  cmp dword [rsi+0x46c], -0x0c
7ffc0691f807  jnz 0x7ffc06910018	->2
7ffc0691f80d  mov esi, [rsi+0x468]
7ffc0691f813  cmp dword [rsi+0x1c], +0x0f
7ffc0691f817  jnz 0x7ffc06910018	->2
7ffc0691f81d  mov r15d, [rsi+0x14]
7ffc0691f821  mov rsi, 0xfffffffb28014670
7ffc0691f82b  cmp rsi, [r15+0x170]
7ffc0691f832  jnz 0x7ffc06910018	->2
7ffc0691f838  cmp dword [r15+0x16c], -0x09
7ffc0691f840  jnz 0x7ffc06910018	->2
7ffc0691f846  cmp dword [rdx+0xc], -0x0c
7ffc0691f84a  jnz 0x7ffc06910018	->2
7ffc0691f850  mov esi, [rdx+0x8]
7ffc0691f853  cmp dword [r15+0x168], 0x28014648
7ffc0691f85e  jnz 0x7ffc06910018	->2
7ffc0691f864  mov ecx, esi
7ffc0691f866  call 0x7ffc1570de20	->lj_tab_len
7ffc0691f86b  mov edx, [0x280104b4]
7ffc0691f872  add eax, +0x01
7ffc0691f875  cmp eax, [rsi+0x18]
7ffc0691f878  jnb 0x7ffc06910018	->2
7ffc0691f87e  mov r15d, [rsi+0x8]
7ffc0691f882  mov dword [r15+rax*8+0x4], 0xfffffffb
7ffc0691f88b  mov [r15+rax*8], ebp
7ffc0691f88f  test byte [rsi+0x4], 0x4
7ffc0691f893  jz 0x7ffc0691f8aa
7ffc0691f895  and byte [rsi+0x4], 0xfb
7ffc0691f899  mov ebp, [0x280103f4]
7ffc0691f8a0  mov [0x280103f4], esi
7ffc0691f8a7  mov [rsi+0xc], ebp
7ffc0691f8aa  add edi, +0x01
7ffc0691f8ad  cmp edi, ebx
7ffc0691f8af  jg 0x7ffc0691001c	->3
7ffc0691f8b5  xorps xmm7, xmm7
7ffc0691f8b8  cvtsi2sd xmm7, edi
7ffc0691f8bc  movsd [rdx+0x40], xmm7
7ffc0691f8c1  movsd [rdx+0x28], xmm7
7ffc0691f8c6  mov dword [rdx+0x24], 0xfffffffe
7ffc0691f8cd  add rsp, +0x10
7ffc0691f8d1  jmp 0x7ffc0691fd24
---- TRACE 4 stop -> 1

---- TRACE 5 start 3/1 tsukuyomi_tokenizer.lua:25
0017  . RET0     0   1
0035  JMP     10 => 0055
0055  JFORL    5   1
---- TRACE 5 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004    int ADD    0001  +1  
0005 >  int LE     0004  0002
0006    num CONV   0004  num.int
---- TRACE 5 mcode 62
7ffc0691f696  mov dword [0x28010410], 0x5
7ffc0691f6a1  mov edx, [0x280104b4]
7ffc0691f6a8  add edi, +0x01
7ffc0691f6ab  cmp edi, ebx
7ffc0691f6ad  jg 0x7ffc06910014	->1
7ffc0691f6b3  xorps xmm7, xmm7
7ffc0691f6b6  cvtsi2sd xmm7, edi
7ffc0691f6ba  movsd [rdx+0x40], xmm7
7ffc0691f6bf  movsd [rdx+0x28], xmm7
7ffc0691f6c4  mov dword [rdx+0x24], 0xfffffffe
7ffc0691f6cb  add rsp, +0x10
7ffc0691f6cf  jmp 0x7ffc0691fd24
---- TRACE 5 stop -> 1

---- TRACE 6 start 4/0 tsukuyomi_tokenizer.lua:38
0027  IST          4
0028  JMP     10 => 0036
0029  UGET    10   0      ; kWhitespaces
0030  TGETV   10  10   9
0031  ISF         10
0032  JMP     11 => 0036
0036  IST          4
0037  JMP     10 => 0050
0038  UGET    10   1      ; kDelimiters
0039  TGETV   10  10   9
0040  ISF         10
0041  JMP     11 => 0050
0050  GGET    10   3      ; "table"
0051  TGETS   10  10   4  ; "insert"
0052  MOV     11   2
0053  MOV     12   9
0054  CALL    10   1   3
0000  . FUNCC               ; table.insert
0055  JFORL    5   1
---- TRACE 6 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004 >  fal SLOAD  #5    T
0005    fun SLOAD  #0    R
0006 >  p32 UREFC  0005  #0  
0007 >  tab ULOAD  0006
0008    p32 HREF   0007  0003
0009 >  p32 EQ     0008  [0x28010458]
0010    tab FLOAD  0007  tab.meta
0011 >  tab EQ     0010  [NULL]
0012 >  p32 UREFC  0005  #1  
0013 >  tab ULOAD  0012
0014    p32 HREF   0013  0003
0015 >  p32 EQ     0014  [0x28010458]
0016    tab FLOAD  0013  tab.meta
0017 >  tab EQ     0016  [NULL]
0018    tab FLOAD  0005  func.env
0019    int FLOAD  0018  tab.hmask
0020 >  int EQ     0019  +63 
0021    p32 FLOAD  0018  tab.node
0022 >  p32 HREFK  0021  "table" @47
0023 >  tab HLOAD  0022
0024    int FLOAD  0023  tab.hmask
0025 >  int EQ     0024  +15 
0026    p32 FLOAD  0023  tab.node
0027 >  p32 HREFK  0026  "insert" @15
0028 >  fun HLOAD  0027
0029 >  tab SLOAD  #3    T
0030 >  fun EQ     0028  table.insert
0031    int CALLL  lj_tab_len  (0029)
0032    int ADD    0031  +1  
0033    int FLOAD  0029  tab.asize
0034 >  int ABC    0033  0032
0035    p32 FLOAD  0029  tab.array
0036    p32 AREF   0035  0032
0037    str ASTORE 0036  0003
0038    nil TBAR   0029
0039    int ADD    0001  +1  
0040 >  int LE     0039  0002
0041    num CONV   0039  num.int
---- TRACE 6 mcode 446
7ffc0691f4d5  mov dword [0x28010410], 0x6
7ffc0691f4e0  mov edx, [0x280104b4]
7ffc0691f4e7  cmp dword [rdx+0x24], -0x02
7ffc0691f4eb  jnz 0x7ffc06910010	->0
7ffc0691f4f1  mov esi, [rdx-0x8]
7ffc0691f4f4  mov ecx, [rsi+0x14]
7ffc0691f4f7  cmp byte [rcx+0x6], 0x1
7ffc0691f4fb  jnz 0x7ffc06910010	->0
7ffc0691f501  lea r15d, [rcx+0x8]
7ffc0691f505  cmp dword [r15+0x4], -0x0c
7ffc0691f50a  jnz 0x7ffc06910010	->0
7ffc0691f510  mov r15d, [r15]
7ffc0691f513  mov ecx, [r15+0x1c]
7ffc0691f517  and ecx, [rbp+0x8]
7ffc0691f51a  lea ecx, [rcx+rcx*2]
7ffc0691f51d  shl ecx, 0x03
7ffc0691f520  add ecx, [r15+0x14]
7ffc0691f524  cmp dword [rcx+0xc], -0x05
7ffc0691f528  jnz 0x7ffc0691f533
7ffc0691f52a  cmp ebp, [rcx+0x8]
7ffc0691f52d  jz 0x7ffc06910010	->0
7ffc0691f533  mov ecx, [rcx+0x10]
7ffc0691f536  test ecx, ecx
7ffc0691f538  jnz 0x7ffc0691f524
7ffc0691f53a  cmp dword [r15+0x10], +0x00
7ffc0691f53f  jnz 0x7ffc06910010	->0
7ffc0691f545  mov ecx, [rsi+0x18]
7ffc0691f548  cmp byte [rcx+0x6], 0x1
7ffc0691f54c  jnz 0x7ffc06910010	->0
7ffc0691f552  lea r15d, [rcx+0x8]
7ffc0691f556  cmp dword [r15+0x4], -0x0c
7ffc0691f55b  jnz 0x7ffc06910010	->0
7ffc0691f561  mov r15d, [r15]
7ffc0691f564  mov ecx, [r15+0x1c]
7ffc0691f568  and ecx, [rbp+0x8]
7ffc0691f56b  lea ecx, [rcx+rcx*2]
7ffc0691f56e  shl ecx, 0x03
7ffc0691f571  add ecx, [r15+0x14]
7ffc0691f575  cmp dword [rcx+0xc], -0x05
7ffc0691f579  jnz 0x7ffc0691f584
7ffc0691f57b  cmp ebp, [rcx+0x8]
7ffc0691f57e  jz 0x7ffc06910010	->0
7ffc0691f584  mov ecx, [rcx+0x10]
7ffc0691f587  test ecx, ecx
7ffc0691f589  jnz 0x7ffc0691f575
7ffc0691f58b  cmp dword [r15+0x10], +0x00
7ffc0691f590  jnz 0x7ffc06910010	->0
7ffc0691f596  mov esi, [rsi+0x8]
7ffc0691f599  cmp dword [rsi+0x1c], +0x3f
7ffc0691f59d  jnz 0x7ffc06910010	->0
7ffc0691f5a3  mov esi, [rsi+0x14]
7ffc0691f5a6  mov rcx, 0xfffffffb28012e68
7ffc0691f5b0  cmp rcx, [rsi+0x470]
7ffc0691f5b7  jnz 0x7ffc06910010	->0
7ffc0691f5bd  cmp dword [rsi+0x46c], -0x0c
7ffc0691f5c4  jnz 0x7ffc06910010	->0
7ffc0691f5ca  mov esi, [rsi+0x468]
7ffc0691f5d0  cmp dword [rsi+0x1c], +0x0f
7ffc0691f5d4  jnz 0x7ffc06910010	->0
7ffc0691f5da  mov r15d, [rsi+0x14]
7ffc0691f5de  mov rsi, 0xfffffffb28014670
7ffc0691f5e8  cmp rsi, [r15+0x170]
7ffc0691f5ef  jnz 0x7ffc06910010	->0
7ffc0691f5f5  cmp dword [r15+0x16c], -0x09
7ffc0691f5fd  jnz 0x7ffc06910010	->0
7ffc0691f603  cmp dword [rdx+0x14], -0x0c
7ffc0691f607  jnz 0x7ffc06910010	->0
7ffc0691f60d  mov esi, [rdx+0x10]
7ffc0691f610  cmp dword [r15+0x168], 0x28014648
7ffc0691f61b  jnz 0x7ffc06910010	->0
7ffc0691f621  mov ecx, esi
7ffc0691f623  call 0x7ffc1570de20	->lj_tab_len
7ffc0691f628  mov edx, [0x280104b4]
7ffc0691f62f  add eax, +0x01
7ffc0691f632  cmp eax, [rsi+0x18]
7ffc0691f635  jnb 0x7ffc06910010	->0
7ffc0691f63b  mov r15d, [rsi+0x8]
7ffc0691f63f  mov dword [r15+rax*8+0x4], 0xfffffffb
7ffc0691f648  mov [r15+rax*8], ebp
7ffc0691f64c  test byte [rsi+0x4], 0x4
7ffc0691f650  jz 0x7ffc0691f667
7ffc0691f652  and byte [rsi+0x4], 0xfb
7ffc0691f656  mov ebp, [0x280103f4]
7ffc0691f65d  mov [0x280103f4], esi
7ffc0691f664  mov [rsi+0xc], ebp
7ffc0691f667  add edi, +0x01
7ffc0691f66a  cmp edi, ebx
7ffc0691f66c  jg 0x7ffc06910014	->1
7ffc0691f672  xorps xmm7, xmm7
7ffc0691f675  cvtsi2sd xmm7, edi
7ffc0691f679  movsd [rdx+0x40], xmm7
7ffc0691f67e  movsd [rdx+0x28], xmm7
7ffc0691f683  mov dword [rdx+0x24], 0xfffffffe
7ffc0691f68a  add rsp, +0x10
7ffc0691f68e  jmp 0x7ffc0691fd24
---- TRACE 6 stop -> 1

---- TRACE 7 start 1/6 tsukuyomi_tokenizer.lua:38
0027  IST          4
0028  JMP     10 => 0036
0036  IST          4
0037  JMP     10 => 0050
0050  GGET    10   3      ; "table"
0051  TGETS   10  10   4  ; "insert"
0052  MOV     11   2
0053  MOV     12   9
0054  CALL    10   1   3
0000  . FUNCC               ; table.insert
0055  JFORL    5   1
---- TRACE 7 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004    fun SLOAD  #0    R
0005    tab FLOAD  0004  func.env
0006    int FLOAD  0005  tab.hmask
0007 >  int EQ     0006  +63 
0008    p32 FLOAD  0005  tab.node
0009 >  p32 HREFK  0008  "table" @47
0010 >  tab HLOAD  0009
0011    int FLOAD  0010  tab.hmask
0012 >  int EQ     0011  +15 
0013    p32 FLOAD  0010  tab.node
0014 >  p32 HREFK  0013  "insert" @15
0015 >  fun HLOAD  0014
0016 >  tab SLOAD  #3    T
0017 >  fun EQ     0015  table.insert
0018    int CALLL  lj_tab_len  (0016)
0019    int ADD    0018  +1  
0020    int FLOAD  0016  tab.asize
0021 >  int ULE    0020  0019
0022    int FLOAD  0016  tab.hmask
0023 >  int EQ     0022  +0  
0024    num CONV   0019  num.int
0025    p32 NEWREF 0016  0024
0026    str HSTORE 0025  0003
0027    nil TBAR   0016
0028    int ADD    0001  +1  
0029 >  int LE     0028  0002
0030    num CONV   0028  num.int
---- TRACE 7 mcode 312
7ffc0691f39a  mov ebp, [rsp+0x20]
7ffc0691f39e  mov dword [0x28010410], 0x7
7ffc0691f3a9  mov edx, [0x280104b4]
7ffc0691f3b0  mov esi, [rdx-0x8]
7ffc0691f3b3  mov esi, [rsi+0x8]
7ffc0691f3b6  cmp dword [rsi+0x1c], +0x3f
7ffc0691f3ba  jnz 0x7ffc06910010	->0
7ffc0691f3c0  mov esi, [rsi+0x14]
7ffc0691f3c3  mov rcx, 0xfffffffb28012e68
7ffc0691f3cd  cmp rcx, [rsi+0x470]
7ffc0691f3d4  jnz 0x7ffc06910010	->0
7ffc0691f3da  cmp dword [rsi+0x46c], -0x0c
7ffc0691f3e1  jnz 0x7ffc06910010	->0
7ffc0691f3e7  mov esi, [rsi+0x468]
7ffc0691f3ed  cmp dword [rsi+0x1c], +0x0f
7ffc0691f3f1  jnz 0x7ffc06910010	->0
7ffc0691f3f7  mov r15d, [rsi+0x14]
7ffc0691f3fb  mov rsi, 0xfffffffb28014670
7ffc0691f405  cmp rsi, [r15+0x170]
7ffc0691f40c  jnz 0x7ffc06910010	->0
7ffc0691f412  cmp dword [r15+0x16c], -0x09
7ffc0691f41a  jnz 0x7ffc06910010	->0
7ffc0691f420  cmp dword [rdx+0x14], -0x0c
7ffc0691f424  jnz 0x7ffc06910010	->0
7ffc0691f42a  mov esi, [rdx+0x10]
7ffc0691f42d  cmp dword [r15+0x168], 0x28014648
7ffc0691f438  jnz 0x7ffc06910010	->0
7ffc0691f43e  mov ecx, esi
7ffc0691f440  call 0x7ffc1570de20	->lj_tab_len
7ffc0691f445  mov ecx, [0x280104b0]
7ffc0691f44c  add eax, +0x01
7ffc0691f44f  cmp eax, [rsi+0x18]
7ffc0691f452  jb 0x7ffc06910010	->0
7ffc0691f458  cmp dword [rsi+0x1c], +0x00
7ffc0691f45c  jnz 0x7ffc06910010	->0
7ffc0691f462  xorps xmm7, xmm7
7ffc0691f465  cvtsi2sd xmm7, eax
7ffc0691f469  movsd [rsp+0x20], xmm7
7ffc0691f46f  lea r8, [rsp+0x20]
7ffc0691f474  mov edx, esi
7ffc0691f476  call 0x7ffc1570dfd0	->lj_tab_newkey
7ffc0691f47b  mov edx, [0x280104b4]
7ffc0691f482  mov dword [rax+0x4], 0xfffffffb
7ffc0691f489  mov [rax], ebp
7ffc0691f48b  test byte [rsi+0x4], 0x4
7ffc0691f48f  jz 0x7ffc0691f4a6
7ffc0691f491  and byte [rsi+0x4], 0xfb
7ffc0691f495  mov ebp, [0x280103f4]
7ffc0691f49c  mov [0x280103f4], esi
7ffc0691f4a3  mov [rsi+0xc], ebp
7ffc0691f4a6  add edi, +0x01
7ffc0691f4a9  cmp edi, ebx
7ffc0691f4ab  jg 0x7ffc06910014	->1
7ffc0691f4b1  xorps xmm7, xmm7
7ffc0691f4b4  cvtsi2sd xmm7, edi
7ffc0691f4b8  movsd [rdx+0x40], xmm7
7ffc0691f4bd  movsd [rdx+0x28], xmm7
7ffc0691f4c2  mov dword [rdx+0x24], 0xfffffffd
7ffc0691f4c9  add rsp, +0x10
7ffc0691f4cd  jmp 0x7ffc0691fd24
---- TRACE 7 stop -> 1

---- TRACE 8 start tsukuyomi_reader.lua:42
0020  TGETV   14   1  13
0021  ISNES   14   4      ; "("
0022  JMP     15 => 0044
0044  ISNES   14   7      ; ")"
0045  JMP     15 => 0062
0062  ISNES   14   9      ; "'"
0063  JMP     15 => 0066
0066  KPRI    15   0
0067  ISNES   14  10      ; "true"
0068  JMP     16 => 0071
0071  ISNES   14  11      ; "false"
0072  JMP     16 => 0075
0075  MOV     17  14
0076  TGETS   16  14  12  ; "find"
0077  KSTR    18  13      ; "^%-?%d+"
0078  CALL    16   2   3
0000  . FUNCC               ; string.find
---- TRACE 8 IR
0001 >  int SLOAD  #12   CRI
0002 >  int LE     0001  +2147483646
0003    int SLOAD  #11   CI
0004 >  tab SLOAD  #2    T
0005    int FLOAD  0004  tab.asize
0006 >  p32 ABC    0005  0001
0007    p32 FLOAD  0004  tab.array
0008    p32 AREF   0007  0003
0009 >  str ALOAD  0008
0010 >  str NE     0009  "(" 
0011 >  str NE     0009  ")" 
0012 >  str NE     0009  "'" 
0013 >  str NE     0009  "true"
0014 >  str NE     0009  "false"
0015    int FLOAD  {0x28015d68}  tab.hmask
0016 >  int EQ     0015  +1  
0017    p32 FLOAD  {0x28015d68}  tab.node
0018 >  p32 HREFK  0017  "__index" @1
0019 >  tab HLOAD  0018
0020    int FLOAD  0019  tab.hmask
0021 >  int EQ     0020  +15 
0022    p32 FLOAD  0019  tab.node
0023 >  p32 HREFK  0022  "find" @1
0024 >  fun HLOAD  0023
0025 >  fun EQ     0024  string.find
0026    int FLOAD  0009  str.len
0027    num CONV   0003  num.int
---- TRACE 8 mcode 446
7ffc0691f1d5  mov dword [0x28010410], 0x8
7ffc0691f1e0  movsd xmm6, [0x280488c8]
7ffc0691f1e9  movsd xmm7, [rdx+0x58]
7ffc0691f1ee  cvttsd2si ebp, xmm7
7ffc0691f1f2  xorps xmm5, xmm5
7ffc0691f1f5  cvtsi2sd xmm5, ebp
7ffc0691f1f9  ucomisd xmm7, xmm5
7ffc0691f1fd  jnz 0x7ffc06910010	->0
7ffc0691f203  jpe 0x7ffc06910010	->0
7ffc0691f209  cmp ebp, 0x7ffffffe
7ffc0691f20f  jg 0x7ffc06910010	->0
7ffc0691f215  cvttsd2si esi, [rdx+0x50]
7ffc0691f21a  cmp dword [rdx+0xc], -0x0c
7ffc0691f21e  jnz 0x7ffc06910010	->0
7ffc0691f224  mov edi, [rdx+0x8]
7ffc0691f227  cmp ebp, [rdi+0x18]
7ffc0691f22a  jnb 0x7ffc06910010	->0
7ffc0691f230  mov edi, [rdi+0x8]
7ffc0691f233  cmp dword [rdi+rsi*8+0x4], -0x05
7ffc0691f238  jnz 0x7ffc06910010	->0
7ffc0691f23e  mov edi, [rdi+rsi*8]
7ffc0691f241  cmp edi, 0x2802cc38
7ffc0691f247  jz 0x7ffc06910014	->1
7ffc0691f24d  cmp edi, 0x280206f8
7ffc0691f253  jz 0x7ffc06910018	->2
7ffc0691f259  cmp edi, 0x280182a8
7ffc0691f25f  jz 0x7ffc0691001c	->3
7ffc0691f265  cmp edi, 0x280129a8
7ffc0691f26b  jz 0x7ffc06910020	->4
7ffc0691f271  cmp edi, 0x28012800
7ffc0691f277  jz 0x7ffc06910024	->5
7ffc0691f27d  cmp dword [0x28015d84], +0x01
7ffc0691f285  jnz 0x7ffc06910028	->6
7ffc0691f28b  mov ebx, [0x28015d7c]
7ffc0691f292  mov rcx, 0xfffffffb28012458
7ffc0691f29c  cmp rcx, [rbx+0x20]
7ffc0691f2a0  jnz 0x7ffc06910028	->6
7ffc0691f2a6  cmp dword [rbx+0x1c], -0x0c
7ffc0691f2aa  jnz 0x7ffc06910028	->6
7ffc0691f2b0  mov ebx, [rbx+0x18]
7ffc0691f2b3  cmp dword [rbx+0x1c], +0x0f
7ffc0691f2b7  jnz 0x7ffc06910028	->6
7ffc0691f2bd  mov ebx, [rbx+0x14]
7ffc0691f2c0  mov rcx, 0xfffffffb28015c08
7ffc0691f2ca  cmp rcx, [rbx+0x20]
7ffc0691f2ce  jnz 0x7ffc06910028	->6
7ffc0691f2d4  cmp dword [rbx+0x1c], -0x09
7ffc0691f2d8  jnz 0x7ffc06910028	->6
7ffc0691f2de  cmp dword [rbx+0x18], 0x28015be0
7ffc0691f2e5  jnz 0x7ffc06910028	->6
7ffc0691f2eb  xorps xmm7, xmm7
7ffc0691f2ee  cvtsi2sd xmm7, esi
7ffc0691f2f2  mov eax, [0x280104b0]
7ffc0691f2f9  mov eax, [rax+0x20]
7ffc0691f2fc  sub eax, edx
7ffc0691f2fe  cmp eax, 0xb8
7ffc0691f304  jb 0x7ffc0691002c	->7
7ffc0691f30a  mov dword [rdx+0xa4], 0xfffffffb
7ffc0691f314  mov dword [rdx+0xa0], 0x2802d170
7ffc0691f31e  mov dword [rdx+0x9c], 0xfffffffb
7ffc0691f328  mov [rdx+0x98], edi
7ffc0691f32e  mov dword [rdx+0x94], 0x9a
7ffc0691f338  mov dword [rdx+0x90], 0x28015be0
7ffc0691f342  mov dword [rdx+0x8c], 0x280356f4
7ffc0691f34c  mov dword [rdx+0x88], 0x31e0
7ffc0691f356  movsd [rdx+0x80], xmm6
7ffc0691f35e  mov dword [rdx+0x7c], 0xffffffff
7ffc0691f365  mov dword [rdx+0x74], 0xfffffffb
7ffc0691f36c  mov [rdx+0x70], edi
7ffc0691f36f  movsd [rdx+0x68], xmm7
7ffc0691f374  movsd [rdx+0x50], xmm7
7ffc0691f379  add edx, 0x98
7ffc0691f37f  mov eax, 0x3
7ffc0691f384  mov esi, 0x280104a8
7ffc0691f389  mov ebx, 0x28010f98
7ffc0691f38e  jmp 0x7ffc156c4388
---- TRACE 8 stop -> stitch

---- TRACE 9 start tsukuyomi_reader.lua:67
0079  ISF         16
0080  JMP     17 => 0086
0086  MOV     17  14
0087  TGETS   16  14  15  ; "sub"
0088  KSHORT  18   1
0089  KSHORT  19   1
0090  CALL    16   2   4
0000  . FUNCC               ; string.sub
0091  ISNES   16  16      ; """
0092  JMP     16 => 0101
0101  MOV     17  14
0102  TGETS   16  14  12  ; "find"
0103  KSTR    18  17      ; "/"
0104  CALL    16   2   3
0000  . FUNCC               ; string.find
0105  KNIL    17  18
0106  ISF         16
0107  JMP     19 => 0126
0126  MOV     18  14
0127  GGET    19   0      ; "tsukuyomi"
0128  TGETS   19  19  19  ; "create_symbol"
0129  MOV     20  18
0130  MOV     21  17
0131  CALL    19   2   3
0000  . FUNCF    8          ; tsukuyomi_symbol.lua:21
0001  . KPRI     2   0
0002  . ISF          1
0003  . JMP      3 => 0009
0009  . MOV      2   0
0010  . UGET     3   0      ; kSymbolCache
0011  . TGETV    3   3   2
0012  . ISF          3
0013  . JMP      4 => 0015
0014  . RET1     3   2
0132  MOV     15  19
0133  MOV     16   7
0134  MOV     17  15
0135  MOV     18   8
0136  CALL    16   1   3
0000  . FUNCF    7          ; tsukuyomi_reader.lua:15
0001  . ISF          1
0002  . JMP      2 => 0014
0014  . UGET     2   0      ; prev_cell
0015  . ISNEP    2   0
0016  . JMP      2 => 0035
0035  . UGET     2   0      ; prev_cell
0036  . TGETB    2   2   1
0037  . ISNEP    2   0
0038  . JMP      2 => 0042
0039  . UGET     2   0      ; prev_cell
0040  . TSETB    0   2   1
0041  . JMP      2 => 0050
0050  . RET0     0   1
0137  KPRI     8   1
0138  JFORL   10   8
---- TRACE 9 IR
0001 >  nil SLOAD  #17   T
0002 >  str SLOAD  #15   T
0003    int FLOAD  {0x28015d68}  tab.hmask
0004 >  int EQ     0003  +1  
0005    p32 FLOAD  {0x28015d68}  tab.node
0006 >  p32 HREFK  0005  "__index" @1
0007 >  tab HLOAD  0006
0008    int FLOAD  0007  tab.hmask
0009 >  int EQ     0008  +15 
0010    p32 FLOAD  0007  tab.node
0011 >  p32 HREFK  0010  "sub" @15
0012 >  fun HLOAD  0011
0013 >  fun EQ     0012  string.sub
0014    int FLOAD  0002  str.len
0015 >  int UGE    0014  +1  
0016    p32 STRREF 0002  +0  
0017    str SNEW   0016  +1  
0018    i8  XLOAD  0016  R
0019 >  int NE     0018  +34 
0020 >  p32 HREFK  0010  "find" @1
0021 >  fun HLOAD  0020
0022 >  fun EQ     0021  string.find
0026    p32 CALLN  lj_str_find  (0016 [0x2801a6f8] 0014 +1  )
0027 >  p32 EQ     0026  [NULL]
0028    fun SLOAD  #0    R
0029    tab FLOAD  0028  func.env
0030    int FLOAD  0029  tab.hmask
0031 >  int EQ     0030  +63 
0032    p32 FLOAD  0029  tab.node
0033 >  p32 HREFK  0032  "tsukuyomi" @33
0034 >  tab HLOAD  0033
0035    int FLOAD  0034  tab.hmask
0036 >  int EQ     0035  +31 
0037    p32 FLOAD  0034  tab.node
0038 >  p32 HREFK  0037  "create_symbol" @21
0039 >  fun HLOAD  0038
0040 >  fun EQ     0039  tsukuyomi_symbol.lua:21
0041 >  p32 UREFC  tsukuyomi_symbol.lua:21  #0  
0042 >  tab ULOAD  0041
0043    p32 HREF   0042  0002
0044 >  tab HLOAD  0043
0045 >  fun SLOAD  #8    T
0046 >  fal SLOAD  #9    T
0047 >  fun EQ     0045  tsukuyomi_reader.lua:15
0048 >  tab SLOAD  #7    T
0049    int FLOAD  0048  tab.asize
0050 >  int ABC    0049  +1  
0051    p32 FLOAD  0048  tab.array
0052    p32 AREF   0051  +1  
0053 >  nil ALOAD  0052
0054    tab FLOAD  0048  tab.meta
0055 >  tab NE     0054  [NULL]
0056    int FLOAD  0054  tab.hmask
0057 >  int EQ     0056  +0  
0058    tab ASTORE 0052  0044
0059    nil TBAR   0048
0060    num SLOAD  #12   RI
0061    num SLOAD  #11   I
0062    num ADD    0061  +1  
0063 >  num LE     0062  0060
---- TRACE 9 mcode 638
7ffc0691ef50  mov dword [0x28010410], 0x9
7ffc0691ef5b  movsd xmm15, [0x280488d0]
7ffc0691ef65  cmp dword [rdx+0x84], -0x01
7ffc0691ef6c  jnz 0x7ffc06910010	->0
7ffc0691ef72  cmp dword [rdx+0x74], -0x05
7ffc0691ef76  jnz 0x7ffc06910010	->0
7ffc0691ef7c  mov ebp, [rdx+0x70]
7ffc0691ef7f  cmp dword [0x28015d84], +0x01
7ffc0691ef87  jnz 0x7ffc06910010	->0
7ffc0691ef8d  mov edi, [0x28015d7c]
7ffc0691ef94  mov rsi, 0xfffffffb28012458
7ffc0691ef9e  cmp rsi, [rdi+0x20]
7ffc0691efa2  jnz 0x7ffc06910010	->0
7ffc0691efa8  cmp dword [rdi+0x1c], -0x0c
7ffc0691efac  jnz 0x7ffc06910010	->0
7ffc0691efb2  mov edi, [rdi+0x18]
7ffc0691efb5  cmp dword [rdi+0x1c], +0x0f
7ffc0691efb9  jnz 0x7ffc06910010	->0
7ffc0691efbf  mov edi, [rdi+0x14]
7ffc0691efc2  mov rsi, 0xfffffffb28015a58
7ffc0691efcc  cmp rsi, [rdi+0x170]
7ffc0691efd3  jnz 0x7ffc06910010	->0
7ffc0691efd9  cmp dword [rdi+0x16c], -0x09
7ffc0691efe0  jnz 0x7ffc06910010	->0
7ffc0691efe6  cmp dword [rdi+0x168], 0x28015a30
7ffc0691eff0  jnz 0x7ffc06910010	->0
7ffc0691eff6  mov r8d, [rbp+0xc]
7ffc0691effa  cmp r8d, +0x01
7ffc0691effe  jb 0x7ffc06910010	->0
7ffc0691f004  lea ecx, [rbp+0x10]
7ffc0691f007  cmp byte [rbp+0x10], 0x22
7ffc0691f00b  jz 0x7ffc06910014	->1
7ffc0691f011  mov rsi, 0xfffffffb28015c08
7ffc0691f01b  cmp rsi, [rdi+0x20]
7ffc0691f01f  jnz 0x7ffc06910018	->2
7ffc0691f025  cmp dword [rdi+0x1c], -0x09
7ffc0691f029  jnz 0x7ffc06910018	->2
7ffc0691f02f  cmp dword [rdi+0x18], 0x28015be0
7ffc0691f036  jnz 0x7ffc06910018	->2
7ffc0691f03c  mov r9d, 0x1
7ffc0691f042  mov edx, 0x2801a6f8
7ffc0691f047  call 0x7ffc1570b160	->lj_str_find
7ffc0691f04c  mov edx, [0x280104b4]
7ffc0691f053  test eax, eax
7ffc0691f055  jnz 0x7ffc06910018	->2
7ffc0691f05b  mov edi, [rdx-0x8]
7ffc0691f05e  mov edi, [rdi+0x8]
7ffc0691f061  cmp dword [rdi+0x1c], +0x3f
7ffc0691f065  jnz 0x7ffc0691001c	->3
7ffc0691f06b  mov edi, [rdi+0x14]
7ffc0691f06e  mov rsi, 0xfffffffb28017d58
7ffc0691f078  cmp rsi, [rdi+0x320]
7ffc0691f07f  jnz 0x7ffc0691001c	->3
7ffc0691f085  cmp dword [rdi+0x31c], -0x0c
7ffc0691f08c  jnz 0x7ffc0691001c	->3
7ffc0691f092  mov edi, [rdi+0x318]
7ffc0691f098  cmp dword [rdi+0x1c], +0x1f
7ffc0691f09c  jnz 0x7ffc0691001c	->3
7ffc0691f0a2  mov edi, [rdi+0x14]
7ffc0691f0a5  mov rsi, 0xfffffffb28024418
7ffc0691f0af  cmp rsi, [rdi+0x200]
7ffc0691f0b6  jnz 0x7ffc0691001c	->3
7ffc0691f0bc  cmp dword [rdi+0x1fc], -0x09
7ffc0691f0c3  jnz 0x7ffc0691001c	->3
7ffc0691f0c9  cmp dword [rdi+0x1f8], 0x2802b530
7ffc0691f0d3  jnz 0x7ffc0691001c	->3
7ffc0691f0d9  cmp dword [0x2802b564], -0x0c
7ffc0691f0e1  jnz 0x7ffc0691001c	->3
7ffc0691f0e7  mov esi, [0x2802b560]
7ffc0691f0ee  mov edi, [rsi+0x1c]
7ffc0691f0f1  and edi, [rbp+0x8]
7ffc0691f0f4  lea edi, [rdi+rdi*2]
7ffc0691f0f7  shl edi, 0x03
7ffc0691f0fa  add edi, [rsi+0x14]
7ffc0691f0fd  cmp dword [rdi+0xc], -0x05
7ffc0691f101  jnz 0x7ffc0691f108
7ffc0691f103  cmp ebp, [rdi+0x8]
7ffc0691f106  jz 0x7ffc0691f114
7ffc0691f108  mov edi, [rdi+0x10]
7ffc0691f10b  test edi, edi
7ffc0691f10d  jnz 0x7ffc0691f0fd
7ffc0691f10f  mov edi, 0x28010458
7ffc0691f114  cmp dword [rdi+0x4], -0x0c
7ffc0691f118  jnz 0x7ffc0691001c	->3
7ffc0691f11e  mov esi, [rdi]
7ffc0691f120  cmp dword [rdx+0x3c], -0x09
7ffc0691f124  jnz 0x7ffc0691001c	->3
7ffc0691f12a  cmp dword [rdx+0x44], -0x02
7ffc0691f12e  jnz 0x7ffc0691001c	->3
7ffc0691f134  cmp dword [rdx+0x38], 0x28042ad8
7ffc0691f13b  jnz 0x7ffc0691001c	->3
7ffc0691f141  cmp dword [rdx+0x34], -0x0c
7ffc0691f145  jnz 0x7ffc0691001c	->3
7ffc0691f14b  mov edi, [rdx+0x30]
7ffc0691f14e  cmp dword [rdi+0x18], +0x01
7ffc0691f152  jbe 0x7ffc06910020	->4
7ffc0691f158  mov ebp, [rdi+0x8]
7ffc0691f15b  cmp dword [rbp+0xc], -0x01
7ffc0691f15f  jnz 0x7ffc06910020	->4
7ffc0691f165  mov ebx, [rdi+0x10]
7ffc0691f168  test ebx, ebx
7ffc0691f16a  jz 0x7ffc06910020	->4
7ffc0691f170  cmp dword [rbx+0x1c], +0x00
7ffc0691f174  jnz 0x7ffc06910020	->4
7ffc0691f17a  mov dword [rbp+0xc], 0xfffffff4
7ffc0691f181  mov [rbp+0x8], esi
7ffc0691f184  test byte [rdi+0x4], 0x4
7ffc0691f188  jz 0x7ffc0691f19f
7ffc0691f18a  and byte [rdi+0x4], 0xfb
7ffc0691f18e  mov esi, [0x280103f4]
7ffc0691f195  mov [0x280103f4], edi
7ffc0691f19c  mov [rdi+0xc], esi
7ffc0691f19f  movsd xmm6, [rdx+0x58]
7ffc0691f1a4  movsd xmm7, [rdx+0x50]
7ffc0691f1a9  addsd xmm7, xmm15
7ffc0691f1ae  ucomisd xmm6, xmm7
7ffc0691f1b2  jb 0x7ffc06910024	->5
7ffc0691f1b8  movsd [rdx+0x68], xmm7
7ffc0691f1bd  movsd [rdx+0x50], xmm7
7ffc0691f1c2  mov dword [rdx+0x44], 0xfffffffe
7ffc0691f1c9  jmp 0x7ffc0691f1d5
---- TRACE 9 stop -> 8

---- TRACE 10 start 8/2 tsukuyomi_reader.lua:55
0046  GGET    15   5      ; "table"
0047  TGETS   15  15   8  ; "remove"
0048  MOV     16   4
0049  CALL    15   2   2
0000  . FUNCF   10          ; builtin:remove
0001  . ISTYPE   0  12
0002  . LEN      2   0
0003  . ISNEP    1   0
0004  . JMP      3 => 0012
0005  . ISEQN    2   0      ; 0
0006  . JMP      3 => 0030
0007  . TGETR    3   0   2
0008  . KPRI     4   0
0009  . TSETR    4   0   2
0010  . RET1     3   2
0050  GGET    16   5      ; "table"
0051  TGETS   16  16   8  ; "remove"
0052  MOV     17   5
0053  CALL    16   2   2
0000  . FUNCF   10          ; builtin:remove
0001  . ISTYPE   0  12
0002  . LEN      2   0
0003  . ISNEP    1   0
0004  . JMP      3 => 0012
0005  . ISEQN    2   0      ; 0
0006  . JMP      3 => 0030
0007  . TGETR    3   0   2
0008  . KPRI     4   0
0009  . TSETR    4   0   2
0010  . RET1     3   2
0054  MOV      6  16
0055  MOV     16   7
0056  MOV     17  15
0057  TGETV   18   9  15
0058  CALL    16   1   3
0000  . FUNCF    7          ; tsukuyomi_reader.lua:15
0001  . ISF          1
0002  . JMP      2 => 0014
0014  . UGET     2   0      ; prev_cell
0015  . ISNEP    2   0
0016  . JMP      2 => 0035
0035  . UGET     2   0      ; prev_cell
0036  . TGETB    2   2   1
0037  . ISNEP    2   0
0038  . JMP      2 => 0042
0042  . GGET     2   0      ; "tsukuyomi"
0043  . TGETS    2   2   1  ; "create_cell"
0044  . MOV      3   0
0045  . KPRI     4   0
0046  . CALL     2   2   3
0000  . . FUNCF    6          ; tsukuyomi_cons_cell.lua:4
0001  . . TNEW     2   3
0002  . . TSETB    0   2   1
0003  . . TSETB    1   2   2
0004  . . GGET     3   0      ; "setmetatable"
0005  . . MOV      4   2
0006  . . UGET     5   0      ; kCellTag
0007  . . CALL     3   1   3
0000  . . . FUNCC               ; setmetatable
0008  . . RET1     2   2
0047  . UGET     3   0      ; prev_cell
0048  . TSETB    2   3   2
0049  . USETV    0   2      ; prev_cell
0050  . RET0     0   1
0059  KPRI    16   0
0060  TSETV   16   9  15
0061  JMP     15 => 0138
0138  JFORL   10   8
---- TRACE 10 IR
0001    int SLOAD  #11   PI
0002    int SLOAD  #12   PRI
0003    str SLOAD  #15   PI
0004    fun SLOAD  #0    R
0005    tab FLOAD  0004  func.env
0006    int FLOAD  0005  tab.hmask
0007 >  int EQ     0006  +63 
0008    p32 FLOAD  0005  tab.node
0009 >  p32 HREFK  0008  "table" @47
0010 >  tab HLOAD  0009
0011    int FLOAD  0010  tab.hmask
0012 >  int EQ     0011  +15 
0013    p32 FLOAD  0010  tab.node
0014 >  p32 HREFK  0013  "remove" @10
0015 >  fun HLOAD  0014
0016 >  tab SLOAD  #5    T
0017 >  fun EQ     0015  builtin:remove
0018    int CALLL  lj_tab_len  (0016)
0019 >  int NE     0018  +0  
0020    int FLOAD  0016  tab.asize
0021 >  int ABC    0020  0018
0022    p32 FLOAD  0016  tab.array
0023    p32 AREF   0022  0018
0024 >  tab ALOAD  0023
0025    nil ASTORE 0023  nil 
0026 >  tab SLOAD  #6    T
0027    int CALLL  lj_tab_len  (0026)
0028 >  int NE     0027  +0  
0029    int FLOAD  0026  tab.asize
0030 >  int ABC    0029  0027
0031    p32 FLOAD  0026  tab.array
0032    p32 AREF   0031  0027
0033 >  tab ALOAD  0032
0034    nil ASTORE 0032  nil 
0035 >  fun SLOAD  #8    T
0036 >  tab SLOAD  #10   T
0037    p32 HREF   0036  0024
0038 >  p32 EQ     0037  [0x28010458]
0039    tab FLOAD  0036  tab.meta
0040 >  tab EQ     0039  [NULL]
0041 >  fun EQ     0035  tsukuyomi_reader.lua:15
0042    int FLOAD  0033  tab.asize
0043 >  int ABC    0042  +2  
0044    p32 FLOAD  0033  tab.array
0045    p32 AREF   0044  +1  
0046 >  tab ALOAD  0045
0047    tab FLOAD  tsukuyomi_reader.lua:15  func.env
0048    int FLOAD  0047  tab.hmask
0049 >  int EQ     0048  +63 
0050    p32 FLOAD  0047  tab.node
0051 >  p32 HREFK  0050  "tsukuyomi" @33
0052 >  tab HLOAD  0051
0053    int FLOAD  0052  tab.hmask
0054 >  int EQ     0053  +31 
0055    p32 FLOAD  0052  tab.node
0056 >  p32 HREFK  0055  "create_cell" @17
0057 >  fun HLOAD  0056
0058 >  fun EQ     0057  tsukuyomi_cons_cell.lua:4
0059 >  tab TNEW   #3    #0  
0060    p32 FLOAD  0059  tab.array
0061    p32 AREF   0060  +1  
0062    tab ASTORE 0061  0024
0063    p32 AREF   0060  +2  
0064    nil ASTORE 0063  nil 
0065    tab FLOAD  tsukuyomi_cons_cell.lua:4  func.env
0066    int FLOAD  0065  tab.hmask
0067 >  int EQ     0066  +63 
0068    p32 FLOAD  0065  tab.node
0069 >  p32 HREFK  0068  "setmetatable" @63
0070 >  fun HLOAD  0069
0071 >  p32 UREFC  tsukuyomi_cons_cell.lua:4  #0  
0072 >  tab ULOAD  0071
0073 >  fun EQ     0070  setmetatable
0074    p32 FREF   0059  tab.meta
0075    tab FSTORE 0074  0072
0076    p32 AREF   0044  +2  
0077    tab FLOAD  0033  tab.meta
0078 >  tab NE     0077  [NULL]
0079    int FLOAD  0077  tab.hmask
0080 >  int EQ     0079  +0  
0081    tab ASTORE 0076  0059
0082    nil TBAR   0033
0083    p32 NEWREF 0036  0024
0084    nil HSTORE 0083  nil 
0085    int ADD    0001  +1  
0086 >  int LE     0085  0002
0087    num CONV   0085  num.int
---- TRACE 10 mcode 929
7ffc0691ebac  mov r14d, edi
7ffc0691ebaf  add rsp, -0x10
7ffc0691ebb3  mov dword [0x28010410], 0xa
7ffc0691ebbe  mov ecx, [0x280103d8]
7ffc0691ebc5  cmp ecx, [0x280103dc]
7ffc0691ebcc  jb 0x7ffc0691ebe5
7ffc0691ebce  mov edx, 0x1
7ffc0691ebd3  mov ecx, 0x280103b8
7ffc0691ebd8  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691ebdd  test eax, eax
7ffc0691ebdf  jnz 0x7ffc06910010	->0
7ffc0691ebe5  mov edx, [0x280104b4]
7ffc0691ebec  mov edi, [rdx-0x8]
7ffc0691ebef  mov edi, [rdi+0x8]
7ffc0691ebf2  cmp dword [rdi+0x1c], +0x3f
7ffc0691ebf6  jnz 0x7ffc06910010	->0
7ffc0691ebfc  mov edi, [rdi+0x14]
7ffc0691ebff  mov rbx, 0xfffffffb28012e68
7ffc0691ec09  cmp rbx, [rdi+0x470]
7ffc0691ec10  jnz 0x7ffc06910010	->0
7ffc0691ec16  cmp dword [rdi+0x46c], -0x0c
7ffc0691ec1d  jnz 0x7ffc06910010	->0
7ffc0691ec23  mov edi, [rdi+0x468]
7ffc0691ec29  cmp dword [rdi+0x1c], +0x0f
7ffc0691ec2d  jnz 0x7ffc06910010	->0
7ffc0691ec33  mov edi, [rdi+0x14]
7ffc0691ec36  mov rbx, 0xfffffffb28014690
7ffc0691ec40  cmp rbx, [rdi+0xf8]
7ffc0691ec47  jnz 0x7ffc06910010	->0
7ffc0691ec4d  cmp dword [rdi+0xf4], -0x09
7ffc0691ec54  jnz 0x7ffc06910010	->0
7ffc0691ec5a  cmp dword [rdx+0x24], -0x0c
7ffc0691ec5e  jnz 0x7ffc06910010	->0
7ffc0691ec64  mov r15d, [rdx+0x20]
7ffc0691ec68  cmp dword [rdi+0xf0], 0x28014788
7ffc0691ec72  jnz 0x7ffc06910010	->0
7ffc0691ec78  mov ecx, r15d
7ffc0691ec7b  call 0x7ffc1570de20	->lj_tab_len
7ffc0691ec80  mov edx, [0x280104b4]
7ffc0691ec87  test eax, eax
7ffc0691ec89  jz 0x7ffc06910014	->1
7ffc0691ec8f  cmp eax, [r15+0x18]
7ffc0691ec93  jnb 0x7ffc06910018	->2
7ffc0691ec99  mov ebx, [r15+0x8]
7ffc0691ec9d  cmp dword [rbx+rax*8+0x4], -0x0c
7ffc0691eca2  jnz 0x7ffc06910018	->2
7ffc0691eca8  mov edi, [rbx+rax*8]
7ffc0691ecab  mov dword [rbx+rax*8+0x4], 0xffffffff
7ffc0691ecb3  cmp dword [rdx+0x2c], -0x0c
7ffc0691ecb7  jnz 0x7ffc0691001c	->3
7ffc0691ecbd  mov r13d, [rdx+0x28]
7ffc0691ecc1  mov ecx, r13d
7ffc0691ecc4  call 0x7ffc1570de20	->lj_tab_len
7ffc0691ecc9  mov edx, [0x280104b4]
7ffc0691ecd0  mov ecx, [0x280104b0]
7ffc0691ecd7  test eax, eax
7ffc0691ecd9  jz 0x7ffc06910020	->4
7ffc0691ecdf  cmp eax, [r13+0x18]
7ffc0691ece3  jnb 0x7ffc06910024	->5
7ffc0691ece9  mov r15d, [r13+0x8]
7ffc0691eced  cmp dword [r15+rax*8+0x4], -0x0c
7ffc0691ecf3  jnz 0x7ffc06910024	->5
7ffc0691ecf9  mov ebx, [r15+rax*8]
7ffc0691ecfd  mov dword [r15+rax*8+0x4], 0xffffffff
7ffc0691ed06  cmp dword [rdx+0x3c], -0x09
7ffc0691ed0a  jnz 0x7ffc06910028	->6
7ffc0691ed10  cmp dword [rdx+0x4c], -0x0c
7ffc0691ed14  jnz 0x7ffc06910028	->6
7ffc0691ed1a  mov edx, [rdx+0x48]
7ffc0691ed1d  mov [rsp+0x24], edx
7ffc0691ed21  lea eax, [rdi-0x4c11db7]
7ffc0691ed27  mov r15d, edi
7ffc0691ed2a  xor r15d, eax
7ffc0691ed2d  rol eax, 0x0e
7ffc0691ed30  sub r15d, eax
7ffc0691ed33  rol eax, 0x05
7ffc0691ed36  xor eax, r15d
7ffc0691ed39  rol r15d, 0x0d
7ffc0691ed3d  sub eax, r15d
7ffc0691ed40  and eax, [rdx+0x1c]
7ffc0691ed43  lea eax, [rax+rax*2]
7ffc0691ed46  shl eax, 0x03
7ffc0691ed49  add eax, [rdx+0x14]
7ffc0691ed4c  cmp dword [rax+0xc], -0x0c
7ffc0691ed50  jnz 0x7ffc0691ed5b
7ffc0691ed52  cmp edi, [rax+0x8]
7ffc0691ed55  jz 0x7ffc06910028	->6
7ffc0691ed5b  mov eax, [rax+0x10]
7ffc0691ed5e  test eax, eax
7ffc0691ed60  jnz 0x7ffc0691ed4c
7ffc0691ed62  cmp dword [rdx+0x10], +0x00
7ffc0691ed66  jnz 0x7ffc06910028	->6
7ffc0691ed6c  mov edx, [0x280104b4]
7ffc0691ed73  cmp dword [rdx+0x38], 0x28042ad8
7ffc0691ed7a  jnz 0x7ffc06910028	->6
7ffc0691ed80  cmp dword [rbx+0x18], +0x02
7ffc0691ed84  jbe 0x7ffc0691002c	->7
7ffc0691ed8a  mov r15d, [rbx+0x8]
7ffc0691ed8e  cmp dword [r15+0xc], -0x0c
7ffc0691ed93  jnz 0x7ffc0691002c	->7
7ffc0691ed99  mov r13d, [0x28042ae0]
7ffc0691eda1  cmp dword [r13+0x1c], +0x3f
7ffc0691eda6  jnz 0x7ffc06910030	->8
7ffc0691edac  mov r13d, [r13+0x14]
7ffc0691edb0  mov rdx, 0xfffffffb28017d58
7ffc0691edba  cmp rdx, [r13+0x320]
7ffc0691edc1  jnz 0x7ffc06910030	->8
7ffc0691edc7  cmp dword [r13+0x31c], -0x0c
7ffc0691edcf  jnz 0x7ffc06910030	->8
7ffc0691edd5  mov r13d, [r13+0x318]
7ffc0691eddc  cmp dword [r13+0x1c], +0x1f
7ffc0691ede1  jnz 0x7ffc06910030	->8
7ffc0691ede7  mov r13d, [r13+0x14]
7ffc0691edeb  mov rdx, 0xfffffffb2802b808
7ffc0691edf5  cmp rdx, [r13+0x1a0]
7ffc0691edfc  jnz 0x7ffc06910030	->8
7ffc0691ee02  cmp dword [r13+0x19c], -0x09
7ffc0691ee0a  jnz 0x7ffc06910030	->8
7ffc0691ee10  cmp dword [r13+0x198], 0x2802bde8
7ffc0691ee1b  jnz 0x7ffc06910030	->8
7ffc0691ee21  mov edx, 0x3
7ffc0691ee26  call 0x7ffc1570df10	->lj_tab_new1
7ffc0691ee2b  mov [rsp+0x20], eax
7ffc0691ee2f  mov edx, [rsp+0x24]
7ffc0691ee33  mov ecx, [0x280104b0]
7ffc0691ee3a  mov dword [rax+0x2c], 0xfffffff4
7ffc0691ee41  mov [rax+0x28], edi
7ffc0691ee44  mov dword [rax+0x34], 0xffffffff
7ffc0691ee4b  mov r13d, [0x2802bdf0]
7ffc0691ee53  cmp dword [r13+0x1c], +0x3f
7ffc0691ee58  jnz 0x7ffc06910034	->9
7ffc0691ee5e  mov r12d, [r13+0x14]
7ffc0691ee62  mov r13, 0xfffffffb280130e8
7ffc0691ee6c  cmp r13, [r12+0x5f0]
7ffc0691ee74  jnz 0x7ffc06910034	->9
7ffc0691ee7a  cmp dword [r12+0x5ec], -0x09
7ffc0691ee83  jnz 0x7ffc06910034	->9
7ffc0691ee89  cmp dword [0x2802be14], -0x0c
7ffc0691ee91  jnz 0x7ffc06910034	->9
7ffc0691ee97  mov r13d, [0x2802be10]
7ffc0691ee9f  cmp dword [r12+0x5e8], 0x280130c0
7ffc0691eeab  jnz 0x7ffc06910034	->9
7ffc0691eeb1  mov [rax+0x10], r13d
7ffc0691eeb5  mov r13d, [rbx+0x10]
7ffc0691eeb9  test r13d, r13d
7ffc0691eebc  jz 0x7ffc06910038	->10
7ffc0691eec2  cmp dword [r13+0x1c], +0x00
7ffc0691eec7  jnz 0x7ffc06910038	->10
7ffc0691eecd  mov dword [r15+0x14], 0xfffffff4
7ffc0691eed5  mov [r15+0x10], eax
7ffc0691eed9  test byte [rbx+0x4], 0x4
7ffc0691eedd  jz 0x7ffc0691eef4
7ffc0691eedf  and byte [rbx+0x4], 0xfb
7ffc0691eee3  mov eax, [0x280103f4]
7ffc0691eeea  mov [0x280103f4], ebx
7ffc0691eef1  mov [rbx+0xc], eax
7ffc0691eef4  mov r8d, 0x28010448
7ffc0691eefa  mov dword [r8+0x4], 0xfffffff4
7ffc0691ef02  mov [r8], edi
7ffc0691ef05  call 0x7ffc1570dfd0	->lj_tab_newkey
7ffc0691ef0a  mov edi, eax
7ffc0691ef0c  mov edx, [0x280104b4]
7ffc0691ef13  mov eax, [rsp+0x20]
7ffc0691ef17  mov dword [rdi+0x4], 0xffffffff
7ffc0691ef1e  add esi, +0x01
7ffc0691ef21  cmp esi, ebp
7ffc0691ef23  jg 0x7ffc0691003c	->11
7ffc0691ef29  xorps xmm7, xmm7
7ffc0691ef2c  cvtsi2sd xmm7, esi
7ffc0691ef30  movsd [rdx+0x68], xmm7
7ffc0691ef35  movsd [rdx+0x50], xmm7
7ffc0691ef3a  mov dword [rdx+0x34], 0xfffffff4
7ffc0691ef41  mov [rdx+0x30], eax
7ffc0691ef44  add rsp, +0x10
7ffc0691ef48  jmp 0x7ffc0691f1d5
---- TRACE 10 stop -> 8

---- TRACE 11 start 8/1 tsukuyomi_reader.lua:45
0023  GGET    15   0      ; "tsukuyomi"
0024  TGETS   15  15   2  ; "create_cell"
0025  KNIL    16  17
0026  CALL    15   2   3
0000  . FUNCF    6          ; tsukuyomi_cons_cell.lua:4
0001  . TNEW     2   3
0002  . TSETB    0   2   1
0003  . TSETB    1   2   2
0004  . GGET     3   0      ; "setmetatable"
0005  . MOV      4   2
0006  . UGET     5   0      ; kCellTag
0007  . CALL     3   1   3
0000  . . FUNCC               ; setmetatable
0008  . RET1     2   2
0027  GGET    16   5      ; "table"
0028  TGETS   16  16   6  ; "insert"
0029  MOV     17   4
0030  MOV     18  15
0031  CALL    16   1   3
0000  . FUNCC               ; table.insert
0032  GGET    16   5      ; "table"
0033  TGETS   16  16   6  ; "insert"
0034  MOV     17   5
0035  MOV     18   6
0036  CALL    16   1   3
0000  . FUNCC               ; table.insert
0037  MOV      6  15
0038  ISF          8
0039  JMP     16 => 0138
0138  JFORL   10   8
---- TRACE 11 IR
0001    int SLOAD  #11   PI
0002    int SLOAD  #12   PRI
0003    str SLOAD  #15   PI
0004    fun SLOAD  #0    R
0005    tab FLOAD  0004  func.env
0006    int FLOAD  0005  tab.hmask
0007 >  int EQ     0006  +63 
0008    p32 FLOAD  0005  tab.node
0009 >  p32 HREFK  0008  "tsukuyomi" @33
0010 >  tab HLOAD  0009
0011    int FLOAD  0010  tab.hmask
0012 >  int EQ     0011  +31 
0013    p32 FLOAD  0010  tab.node
0014 >  p32 HREFK  0013  "create_cell" @17
0015 >  fun HLOAD  0014
0016 >  fun EQ     0015  tsukuyomi_cons_cell.lua:4
0017 >  tab TNEW   #3    #0  
0018    p32 FLOAD  0017  tab.array
0019    p32 AREF   0018  +1  
0020    nil ASTORE 0019  nil 
0021    p32 AREF   0018  +2  
0022    nil ASTORE 0021  nil 
0023    tab FLOAD  tsukuyomi_cons_cell.lua:4  func.env
0024    int FLOAD  0023  tab.hmask
0025 >  int EQ     0024  +63 
0026    p32 FLOAD  0023  tab.node
0027 >  p32 HREFK  0026  "setmetatable" @63
0028 >  fun HLOAD  0027
0029 >  p32 UREFC  tsukuyomi_cons_cell.lua:4  #0  
0030 >  tab ULOAD  0029
0031 >  fun EQ     0028  setmetatable
0032    p32 FREF   0017  tab.meta
0033    tab FSTORE 0032  0030
0034 >  p32 HREFK  0008  "table" @47
0035 >  tab HLOAD  0034
0036    int FLOAD  0035  tab.hmask
0037 >  int EQ     0036  +15 
0038    p32 FLOAD  0035  tab.node
0039 >  p32 HREFK  0038  "insert" @15
0040 >  fun HLOAD  0039
0041 >  tab SLOAD  #5    T
0042 >  fun EQ     0040  table.insert
0043    int CALLL  lj_tab_len  (0041)
0044    int ADD    0043  +1  
0045    int FLOAD  0041  tab.asize
0046 >  int ABC    0045  0044
0047    p32 FLOAD  0041  tab.array
0048    p32 AREF   0047  0044
0049    tab ASTORE 0048  0017
0050    nil TBAR   0041
0051 >  tab SLOAD  #6    T
0052 >  tab SLOAD  #7    T
0053    int CALLL  lj_tab_len  (0051)
0054    int ADD    0053  +1  
0055    int FLOAD  0051  tab.asize
0056 >  int ABC    0055  0054
0057    p32 FLOAD  0051  tab.array
0058    p32 AREF   0057  0054
0059    tab ASTORE 0058  0052
0060    nil TBAR   0051
0061 >  fal SLOAD  #9    T
0062    int ADD    0001  +1  
0063 >  int LE     0062  0002
0064    num CONV   0062  num.int
---- TRACE 11 mcode 715
7ffc0691e8de  add rsp, -0x10
7ffc0691e8e2  mov dword [0x28010410], 0xb
7ffc0691e8ed  mov ecx, [0x280103d8]
7ffc0691e8f4  cmp ecx, [0x280103dc]
7ffc0691e8fb  jb 0x7ffc0691e914
7ffc0691e8fd  mov edx, 0x1
7ffc0691e902  mov ecx, 0x280103b8
7ffc0691e907  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691e90c  test eax, eax
7ffc0691e90e  jnz 0x7ffc06910010	->0
7ffc0691e914  mov edx, [0x280104b4]
7ffc0691e91b  mov ecx, [0x280104b0]
7ffc0691e922  mov ebx, [rdx-0x8]
7ffc0691e925  mov ebx, [rbx+0x8]
7ffc0691e928  cmp dword [rbx+0x1c], +0x3f
7ffc0691e92c  jnz 0x7ffc06910010	->0
7ffc0691e932  mov ebx, [rbx+0x14]
7ffc0691e935  mov rdx, 0xfffffffb28017d58
7ffc0691e93f  cmp rdx, [rbx+0x320]
7ffc0691e946  jnz 0x7ffc06910010	->0
7ffc0691e94c  cmp dword [rbx+0x31c], -0x0c
7ffc0691e953  jnz 0x7ffc06910010	->0
7ffc0691e959  mov r15d, [rbx+0x318]
7ffc0691e960  cmp dword [r15+0x1c], +0x1f
7ffc0691e965  jnz 0x7ffc06910010	->0
7ffc0691e96b  mov r15d, [r15+0x14]
7ffc0691e96f  mov rdx, 0xfffffffb2802b808
7ffc0691e979  cmp rdx, [r15+0x1a0]
7ffc0691e980  jnz 0x7ffc06910010	->0
7ffc0691e986  cmp dword [r15+0x19c], -0x09
7ffc0691e98e  jnz 0x7ffc06910010	->0
7ffc0691e994  cmp dword [r15+0x198], 0x2802bde8
7ffc0691e99f  jnz 0x7ffc06910010	->0
7ffc0691e9a5  mov edx, 0x3
7ffc0691e9aa  call 0x7ffc1570df10	->lj_tab_new1
7ffc0691e9af  mov [rsp+0x20], eax
7ffc0691e9b3  mov edx, [0x280104b4]
7ffc0691e9ba  mov dword [rax+0x2c], 0xffffffff
7ffc0691e9c1  mov dword [rax+0x34], 0xffffffff
7ffc0691e9c8  mov r15d, [0x2802bdf0]
7ffc0691e9d0  cmp dword [r15+0x1c], +0x3f
7ffc0691e9d5  jnz 0x7ffc06910014	->1
7ffc0691e9db  mov r14d, [r15+0x14]
7ffc0691e9df  mov rcx, 0xfffffffb280130e8
7ffc0691e9e9  cmp rcx, [r14+0x5f0]
7ffc0691e9f0  jnz 0x7ffc06910014	->1
7ffc0691e9f6  cmp dword [r14+0x5ec], -0x09
7ffc0691e9fe  jnz 0x7ffc06910014	->1
7ffc0691ea04  cmp dword [0x2802be14], -0x0c
7ffc0691ea0c  jnz 0x7ffc06910014	->1
7ffc0691ea12  mov r15d, [0x2802be10]
7ffc0691ea1a  cmp dword [r14+0x5e8], 0x280130c0
7ffc0691ea25  jnz 0x7ffc06910014	->1
7ffc0691ea2b  mov [rax+0x10], r15d
7ffc0691ea2f  mov rcx, 0xfffffffb28012e68
7ffc0691ea39  cmp rcx, [rbx+0x470]
7ffc0691ea40  jnz 0x7ffc06910018	->2
7ffc0691ea46  cmp dword [rbx+0x46c], -0x0c
7ffc0691ea4d  jnz 0x7ffc06910018	->2
7ffc0691ea53  mov ebx, [rbx+0x468]
7ffc0691ea59  cmp dword [rbx+0x1c], +0x0f
7ffc0691ea5d  jnz 0x7ffc06910018	->2
7ffc0691ea63  mov r15d, [rbx+0x14]
7ffc0691ea67  mov rbx, 0xfffffffb28014670
7ffc0691ea71  cmp rbx, [r15+0x170]
7ffc0691ea78  jnz 0x7ffc06910018	->2
7ffc0691ea7e  cmp dword [r15+0x16c], -0x09
7ffc0691ea86  jnz 0x7ffc06910018	->2
7ffc0691ea8c  cmp dword [rdx+0x24], -0x0c
7ffc0691ea90  jnz 0x7ffc06910018	->2
7ffc0691ea96  mov ebx, [rdx+0x20]
7ffc0691ea99  cmp dword [r15+0x168], 0x28014648
7ffc0691eaa4  jnz 0x7ffc06910018	->2
7ffc0691eaaa  mov ecx, ebx
7ffc0691eaac  call 0x7ffc1570de20	->lj_tab_len
7ffc0691eab1  mov r15d, eax
7ffc0691eab4  mov edx, [0x280104b4]
7ffc0691eabb  mov eax, [rsp+0x20]
7ffc0691eabf  mov r14d, r15d
7ffc0691eac2  add r14d, +0x01
7ffc0691eac6  cmp r14d, [rbx+0x18]
7ffc0691eaca  jnb 0x7ffc06910018	->2
7ffc0691ead0  mov r15d, [rbx+0x8]
7ffc0691ead4  mov dword [r15+r14*8+0x4], 0xfffffff4
7ffc0691eadd  mov [r15+r14*8], eax
7ffc0691eae1  test byte [rbx+0x4], 0x4
7ffc0691eae5  jz 0x7ffc0691eafc
7ffc0691eae7  and byte [rbx+0x4], 0xfb
7ffc0691eaeb  mov ecx, [0x280103f4]
7ffc0691eaf2  mov [0x280103f4], ebx
7ffc0691eaf9  mov [rbx+0xc], ecx
7ffc0691eafc  cmp dword [rdx+0x2c], -0x0c
7ffc0691eb00  jnz 0x7ffc0691001c	->3
7ffc0691eb06  mov ebx, [rdx+0x28]
7ffc0691eb09  cmp dword [rdx+0x34], -0x0c
7ffc0691eb0d  jnz 0x7ffc0691001c	->3
7ffc0691eb13  mov r15d, [rdx+0x30]
7ffc0691eb17  mov ecx, ebx
7ffc0691eb19  call 0x7ffc1570de20	->lj_tab_len
7ffc0691eb1e  mov r14d, eax
7ffc0691eb21  mov edx, [0x280104b4]
7ffc0691eb28  mov eax, [rsp+0x20]
7ffc0691eb2c  mov r13d, r14d
7ffc0691eb2f  add r13d, +0x01
7ffc0691eb33  cmp r13d, [rbx+0x18]
7ffc0691eb37  jnb 0x7ffc0691001c	->3
7ffc0691eb3d  mov r14d, [rbx+0x8]
7ffc0691eb41  mov dword [r14+r13*8+0x4], 0xfffffff4
7ffc0691eb4a  mov [r14+r13*8], r15d
7ffc0691eb4e  test byte [rbx+0x4], 0x4
7ffc0691eb52  jz 0x7ffc0691eb69
7ffc0691eb54  and byte [rbx+0x4], 0xfb
7ffc0691eb58  mov ecx, [0x280103f4]
7ffc0691eb5f  mov [0x280103f4], ebx
7ffc0691eb66  mov [rbx+0xc], ecx
7ffc0691eb69  cmp dword [rdx+0x44], -0x02
7ffc0691eb6d  jnz 0x7ffc06910020	->4
7ffc0691eb73  add esi, +0x01
7ffc0691eb76  cmp esi, ebp
7ffc0691eb78  jg 0x7ffc06910024	->5
7ffc0691eb7e  xorps xmm7, xmm7
7ffc0691eb81  cvtsi2sd xmm7, esi
7ffc0691eb85  movsd [rdx+0x68], xmm7
7ffc0691eb8a  movsd [rdx+0x50], xmm7
7ffc0691eb8f  mov dword [rdx+0x44], 0xfffffffe
7ffc0691eb96  mov dword [rdx+0x34], 0xfffffff4
7ffc0691eb9d  mov [rdx+0x30], eax
7ffc0691eba0  add rsp, +0x10
7ffc0691eba4  jmp 0x7ffc0691f1d5
---- TRACE 11 stop -> 8

NOP 
SYMBOL core/print <- FUNC arg0
RET RAW print(arg0)
ENDFUNC 
CALL core/print, "first lisp code is now being executed!"
SYMBOL core/car <- FUNC cell
RET RAW cell[1]
ENDFUNC 
SYMBOL core/cdr <- FUNC cell
RET RAW cell[2]
ENDFUNC 
SYMBOL core/cadr <- FUNC cell
VAR __Var0 <- CALL core/cdr, core/cell
RET CALL core/car, __Var0
ENDFUNC 
SYMBOL core/first <- FUNC cell
RET CALL core/car, core/cell
ENDFUNC 
SYMBOL core/ffirst <- FUNC cell
VAR __Var1 <- CALL core/first, core/cell
RET CALL core/first, __Var1
ENDFUNC 
SYMBOL core/rest <- FUNC cell
RET CALL core/cdr, core/cell
ENDFUNC 
*** compiler output ***

function tsukuyomi.core.print(arg0)
    return print(arg0)
end
tsukuyomi.core.print("first lisp code is now being executed!")
function tsukuyomi.core.car(cell)
    return cell[1]
end
function tsukuyomi.core.cdr(cell)
    return cell[2]
end
function tsukuyomi.core.cadr(cell)
    local __Var0 = tsukuyomi.core.cdr(cell)
    return tsukuyomi.core.car(__Var0)
end
function tsukuyomi.core.first(cell)
    return tsukuyomi.core.car(cell)
end
function tsukuyomi.core.ffirst(cell)
    local __Var1 = tsukuyomi.core.first(cell)
    return tsukuyomi.core.first(__Var1)
end
function tsukuyomi.core.rest(cell)
    return tsukuyomi.core.cdr(cell)
end

*** load ***

first lisp code is now being executed!

---- TRACE 12 start 6/0 tsukuyomi_tokenizer.lua:38
0027  IST          4
0028  JMP     10 => 0036
0029  UGET    10   0      ; kWhitespaces
0030  TGETV   10  10   9
0031  ISF         10
0032  JMP     11 => 0036
0033  MOV     10   3
0034  CALL    10   1   1
0000  . FUNCF    4          ; tsukuyomi_tokenizer.lua:19
0001  . UGET     0   0      ; word_bucket
0002  . LEN      0   0
0003  . KSHORT   1   0
0004  . ISGE     1   0
0005  . JMP      0 => 0017
0006  . GGET     0   0      ; "table"
0007  . TGETS    0   0   1  ; "concat"
0008  . UGET     1   0      ; word_bucket
0009  . CALL     0   2   2
0000  . . FUNCC               ; table.concat
0010  . GGET     1   0      ; "table"
0011  . TGETS    1   1   2  ; "insert"
0012  . UGET     2   1      ; tokens
0013  . MOV      3   0
0014  . CALL     1   1   3
0000  . . FUNCC               ; table.insert
0015  . TNEW     1   0
0016  . USETV    0   1      ; word_bucket
0017  . RET0     0   1
0035  JMP     10 => 0055
0055  JFORL    5   1
---- TRACE 12 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004 >  fal SLOAD  #5    T
0005    fun SLOAD  #0    R
0006 >  p32 UREFC  0005  #0  
0007 >  tab ULOAD  0006
0008    p32 HREF   0007  0003
0009 >  tru HLOAD  0008
0010 >  fun SLOAD  #4    T
0011 >  fun EQ     0010  tsukuyomi_tokenizer.lua:19
0012 >  tab SLOAD  #3    T
0013    int CALLL  lj_tab_len  (0012)
0014 >  int GT     0013  +0  
0015    tab FLOAD  tsukuyomi_tokenizer.lua:19  func.env
0016    int FLOAD  0015  tab.hmask
0017 >  int EQ     0016  +63 
0018    p32 FLOAD  0015  tab.node
0019 >  p32 HREFK  0018  "table" @47
0020 >  tab HLOAD  0019
0021    int FLOAD  0020  tab.hmask
0022 >  int EQ     0021  +15 
0023    p32 FLOAD  0020  tab.node
0024 >  p32 HREFK  0023  "concat" @14
0025 >  fun HLOAD  0024
0026 >  fun EQ     0025  table.concat
0027    p32 BUFHDR [0x28010414]  RESET
0032    p32 CALLL  lj_buf_puttab  (0027 0012 [NULL] +1   0013)
0033 >  p64 NE     0032  [NULL]
0034    str BUFSTR 0032  0027
0035 >  p32 HREFK  0023  "insert" @15
0036 >  fun HLOAD  0035
0037 >  tab SLOAD  #2    T
0038 >  fun EQ     0036  table.insert
0039    int CALLL  lj_tab_len  (0037)
0040    int ADD    0039  +1  
0041    int FLOAD  0037  tab.asize
0042 >  int ULE    0041  0040
0043    int FLOAD  0037  tab.hmask
0044 >  int EQ     0043  +0  
0045    num CONV   0040  num.int
0046    p32 NEWREF 0037  0045
0047    str HSTORE 0046  0034
0048    nil TBAR   0037
0049 >  tab TNEW   #0    #0  
0050    int ADD    0001  +1  
0051 >  int LE     0050  0002
0052    num CONV   0050  num.int
---- TRACE 12 mcode 644
7ffc0691e657  add rsp, -0x10
7ffc0691e65b  mov dword [0x28010410], 0xc
7ffc0691e666  mov ecx, [0x280103d8]
7ffc0691e66d  cmp ecx, [0x280103dc]
7ffc0691e674  jb 0x7ffc0691e68d
7ffc0691e676  mov edx, 0x2
7ffc0691e67b  mov ecx, 0x280103b8
7ffc0691e680  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691e685  test eax, eax
7ffc0691e687  jnz 0x7ffc06910010	->0
7ffc0691e68d  mov edx, [0x280104b4]
7ffc0691e694  cmp dword [rdx+0x24], -0x02
7ffc0691e698  jnz 0x7ffc06910010	->0
7ffc0691e69e  mov esi, [rdx-0x8]
7ffc0691e6a1  mov esi, [rsi+0x14]
7ffc0691e6a4  cmp byte [rsi+0x6], 0x1
7ffc0691e6a8  jnz 0x7ffc06910010	->0
7ffc0691e6ae  lea esi, [rsi+0x8]
7ffc0691e6b1  cmp dword [rsi+0x4], -0x0c
7ffc0691e6b5  jnz 0x7ffc06910010	->0
7ffc0691e6bb  mov r15d, [rsi]
7ffc0691e6be  mov esi, [r15+0x1c]
7ffc0691e6c2  and esi, [rbp+0x8]
7ffc0691e6c5  lea esi, [rsi+rsi*2]
7ffc0691e6c8  shl esi, 0x03
7ffc0691e6cb  add esi, [r15+0x14]
7ffc0691e6cf  cmp dword [rsi+0xc], -0x05
7ffc0691e6d3  jnz 0x7ffc0691e6da
7ffc0691e6d5  cmp ebp, [rsi+0x8]
7ffc0691e6d8  jz 0x7ffc0691e6e6
7ffc0691e6da  mov esi, [rsi+0x10]
7ffc0691e6dd  test esi, esi
7ffc0691e6df  jnz 0x7ffc0691e6cf
7ffc0691e6e1  mov esi, 0x28010458
7ffc0691e6e6  cmp dword [rsi+0x4], -0x03
7ffc0691e6ea  jnz 0x7ffc06910010	->0
7ffc0691e6f0  cmp dword [rdx+0x1c], -0x09
7ffc0691e6f4  jnz 0x7ffc06910010	->0
7ffc0691e6fa  cmp dword [rdx+0x18], 0x2803f488
7ffc0691e701  jnz 0x7ffc06910010	->0
7ffc0691e707  cmp dword [rdx+0x14], -0x0c
7ffc0691e70b  jnz 0x7ffc06910010	->0
7ffc0691e711  mov ecx, [rdx+0x10]
7ffc0691e714  mov [rsp+0x2c], ecx
7ffc0691e718  call 0x7ffc1570de20	->lj_tab_len
7ffc0691e71d  mov edx, [rsp+0x2c]
7ffc0691e721  test eax, eax
7ffc0691e723  jle 0x7ffc06910014	->1
7ffc0691e729  mov esi, [0x2803f490]
7ffc0691e730  cmp dword [rsi+0x1c], +0x3f
7ffc0691e734  jnz 0x7ffc06910018	->2
7ffc0691e73a  mov esi, [rsi+0x14]
7ffc0691e73d  mov rcx, 0xfffffffb28012e68
7ffc0691e747  cmp rcx, [rsi+0x470]
7ffc0691e74e  jnz 0x7ffc06910018	->2
7ffc0691e754  cmp dword [rsi+0x46c], -0x0c
7ffc0691e75b  jnz 0x7ffc06910018	->2
7ffc0691e761  mov esi, [rsi+0x468]
7ffc0691e767  cmp dword [rsi+0x1c], +0x0f
7ffc0691e76b  jnz 0x7ffc06910018	->2
7ffc0691e771  mov r15d, [rsi+0x14]
7ffc0691e775  mov rsi, 0xfffffffb280147d0
7ffc0691e77f  cmp rsi, [r15+0x158]
7ffc0691e786  jnz 0x7ffc06910018	->2
7ffc0691e78c  cmp dword [r15+0x154], -0x09
7ffc0691e794  jnz 0x7ffc06910018	->2
7ffc0691e79a  cmp dword [r15+0x150], 0x280147a8
7ffc0691e7a5  jnz 0x7ffc06910018	->2
7ffc0691e7ab  mov ecx, 0x28010414
7ffc0691e7b0  mov esi, [rcx+0x8]
7ffc0691e7b3  mov [rcx], esi
7ffc0691e7b5  mov [rsp+0x20], rax
7ffc0691e7ba  mov r9d, 0x1
7ffc0691e7c0  xor r8d, r8d
7ffc0691e7c3  call 0x7ffc156d6660	->lj_buf_puttab
7ffc0691e7c8  mov ecx, eax
7ffc0691e7ca  test rcx, rcx
7ffc0691e7cd  jz 0x7ffc06910018	->2
7ffc0691e7d3  call 0x7ffc156d6880	->lj_buf_tostr
7ffc0691e7d8  mov [rsp+0x28], eax
7ffc0691e7dc  mov edx, [0x280104b4]
7ffc0691e7e3  mov rsi, 0xfffffffb28014670
7ffc0691e7ed  cmp rsi, [r15+0x170]
7ffc0691e7f4  jnz 0x7ffc06910018	->2
7ffc0691e7fa  cmp dword [r15+0x16c], -0x09
7ffc0691e802  jnz 0x7ffc06910018	->2
7ffc0691e808  cmp dword [rdx+0xc], -0x0c
7ffc0691e80c  jnz 0x7ffc06910018	->2
7ffc0691e812  mov esi, [rdx+0x8]
7ffc0691e815  cmp dword [r15+0x168], 0x28014648
7ffc0691e820  jnz 0x7ffc06910018	->2
7ffc0691e826  mov ecx, esi
7ffc0691e828  call 0x7ffc1570de20	->lj_tab_len
7ffc0691e82d  mov ecx, [0x280104b0]
7ffc0691e834  add eax, +0x01
7ffc0691e837  cmp eax, [rsi+0x18]
7ffc0691e83a  jb 0x7ffc06910018	->2
7ffc0691e840  cmp dword [rsi+0x1c], +0x00
7ffc0691e844  jnz 0x7ffc06910018	->2
7ffc0691e84a  xorps xmm7, xmm7
7ffc0691e84d  cvtsi2sd xmm7, eax
7ffc0691e851  movsd [rsp+0x30], xmm7
7ffc0691e857  lea r8, [rsp+0x30]
7ffc0691e85c  mov edx, esi
7ffc0691e85e  call 0x7ffc1570dfd0	->lj_tab_newkey
7ffc0691e863  mov r15d, eax
7ffc0691e866  mov ecx, [0x280104b0]
7ffc0691e86d  mov eax, [rsp+0x28]
7ffc0691e871  mov dword [r15+0x4], 0xfffffffb
7ffc0691e879  mov [r15], eax
7ffc0691e87c  test byte [rsi+0x4], 0x4
7ffc0691e880  jz 0x7ffc0691e897
7ffc0691e882  and byte [rsi+0x4], 0xfb
7ffc0691e886  mov edx, [0x280103f4]
7ffc0691e88d  mov [0x280103f4], esi
7ffc0691e894  mov [rsi+0xc], edx
7ffc0691e897  xor edx, edx
7ffc0691e899  call 0x7ffc1570df10	->lj_tab_new1
7ffc0691e89e  mov edx, [0x280104b4]
7ffc0691e8a5  add edi, +0x01
7ffc0691e8a8  cmp edi, ebx
7ffc0691e8aa  jg 0x7ffc06910020	->4
7ffc0691e8b0  xorps xmm7, xmm7
7ffc0691e8b3  cvtsi2sd xmm7, edi
7ffc0691e8b7  movsd [rdx+0x40], xmm7
7ffc0691e8bc  movsd [rdx+0x28], xmm7
7ffc0691e8c1  mov dword [rdx+0x24], 0xfffffffe
7ffc0691e8c8  mov dword [rdx+0x14], 0xfffffff4
7ffc0691e8cf  mov [rdx+0x10], eax
7ffc0691e8d2  add rsp, +0x20
7ffc0691e8d6  jmp 0x7ffc0691fd24
---- TRACE 12 stop -> 1

---- TRACE 13 start 12/0 tsukuyomi_tokenizer.lua:38
0027  IST          4
0028  JMP     10 => 0036
0029  UGET    10   0      ; kWhitespaces
0030  TGETV   10  10   9
0031  ISF         10
0032  JMP     11 => 0036
0036  IST          4
0037  JMP     10 => 0050
0038  UGET    10   1      ; kDelimiters
0039  TGETV   10  10   9
0040  ISF         10
0041  JMP     11 => 0050
0042  MOV     10   3
0043  CALL    10   1   1
0000  . FUNCF    4          ; tsukuyomi_tokenizer.lua:19
0001  . UGET     0   0      ; word_bucket
0002  . LEN      0   0
0003  . KSHORT   1   0
0004  . ISGE     1   0
0005  . JMP      0 => 0017
0017  . RET0     0   1
0044  GGET    10   3      ; "table"
0045  TGETS   10  10   4  ; "insert"
0046  MOV     11   1
0047  MOV     12   9
0048  CALL    10   1   3
0000  . FUNCC               ; table.insert
0049  JMP     10 => 0055
0055  JFORL    5   1
---- TRACE 13 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004 >  fal SLOAD  #5    T
0005    fun SLOAD  #0    R
0006 >  p32 UREFC  0005  #0  
0007 >  tab ULOAD  0006
0008    p32 HREF   0007  0003
0009 >  p32 EQ     0008  [0x28010458]
0010    tab FLOAD  0007  tab.meta
0011 >  tab EQ     0010  [NULL]
0012 >  p32 UREFC  0005  #1  
0013 >  tab ULOAD  0012
0014    p32 HREF   0013  0003
0015 >  tru HLOAD  0014
0016 >  fun SLOAD  #4    T
0017 >  fun EQ     0016  tsukuyomi_tokenizer.lua:19
0018 >  tab SLOAD  #3    T
0019    int CALLL  lj_tab_len  (0018)
0020 >  int LE     0019  +0  
0021    tab FLOAD  0005  func.env
0022    int FLOAD  0021  tab.hmask
0023 >  int EQ     0022  +63 
0024    p32 FLOAD  0021  tab.node
0025 >  p32 HREFK  0024  "table" @47
0026 >  tab HLOAD  0025
0027    int FLOAD  0026  tab.hmask
0028 >  int EQ     0027  +15 
0029    p32 FLOAD  0026  tab.node
0030 >  p32 HREFK  0029  "insert" @15
0031 >  fun HLOAD  0030
0032 >  tab SLOAD  #2    T
0033 >  fun EQ     0031  table.insert
0034    int CALLL  lj_tab_len  (0032)
0035    int ADD    0034  +1  
0036    int FLOAD  0032  tab.asize
0037 >  int ABC    0036  0035
0038    p32 FLOAD  0032  tab.array
0039    p32 AREF   0038  0035
0040    str ASTORE 0039  0003
0041    nil TBAR   0032
0042    int ADD    0001  +1  
0043 >  int LE     0042  0002
0044    num CONV   0042  num.int
---- TRACE 13 mcode 511
7ffc0691e455  mov dword [0x28010410], 0xd
7ffc0691e460  mov edx, [0x280104b4]
7ffc0691e467  cmp dword [rdx+0x24], -0x02
7ffc0691e46b  jnz 0x7ffc06910010	->0
7ffc0691e471  mov esi, [rdx-0x8]
7ffc0691e474  mov ecx, [rsi+0x14]
7ffc0691e477  cmp byte [rcx+0x6], 0x1
7ffc0691e47b  jnz 0x7ffc06910010	->0
7ffc0691e481  lea r15d, [rcx+0x8]
7ffc0691e485  cmp dword [r15+0x4], -0x0c
7ffc0691e48a  jnz 0x7ffc06910010	->0
7ffc0691e490  mov r15d, [r15]
7ffc0691e493  mov ecx, [r15+0x1c]
7ffc0691e497  and ecx, [rbp+0x8]
7ffc0691e49a  lea ecx, [rcx+rcx*2]
7ffc0691e49d  shl ecx, 0x03
7ffc0691e4a0  add ecx, [r15+0x14]
7ffc0691e4a4  cmp dword [rcx+0xc], -0x05
7ffc0691e4a8  jnz 0x7ffc0691e4b3
7ffc0691e4aa  cmp ebp, [rcx+0x8]
7ffc0691e4ad  jz 0x7ffc06910010	->0
7ffc0691e4b3  mov ecx, [rcx+0x10]
7ffc0691e4b6  test ecx, ecx
7ffc0691e4b8  jnz 0x7ffc0691e4a4
7ffc0691e4ba  cmp dword [r15+0x10], +0x00
7ffc0691e4bf  jnz 0x7ffc06910010	->0
7ffc0691e4c5  mov ecx, [rsi+0x18]
7ffc0691e4c8  cmp byte [rcx+0x6], 0x1
7ffc0691e4cc  jnz 0x7ffc06910010	->0
7ffc0691e4d2  lea r15d, [rcx+0x8]
7ffc0691e4d6  cmp dword [r15+0x4], -0x0c
7ffc0691e4db  jnz 0x7ffc06910010	->0
7ffc0691e4e1  mov r14d, [r15]
7ffc0691e4e4  mov r15d, [r14+0x1c]
7ffc0691e4e8  and r15d, [rbp+0x8]
7ffc0691e4ec  lea r15d, [r15+r15*2]
7ffc0691e4f0  shl r15d, 0x03
7ffc0691e4f4  add r15d, [r14+0x14]
7ffc0691e4f8  cmp dword [r15+0xc], -0x05
7ffc0691e4fd  jnz 0x7ffc0691e505
7ffc0691e4ff  cmp ebp, [r15+0x8]
7ffc0691e503  jz 0x7ffc0691e514
7ffc0691e505  mov r15d, [r15+0x10]
7ffc0691e509  test r15d, r15d
7ffc0691e50c  jnz 0x7ffc0691e4f8
7ffc0691e50e  mov r15d, 0x28010458
7ffc0691e514  cmp dword [r15+0x4], -0x03
7ffc0691e519  jnz 0x7ffc06910010	->0
7ffc0691e51f  cmp dword [rdx+0x1c], -0x09
7ffc0691e523  jnz 0x7ffc06910010	->0
7ffc0691e529  cmp dword [rdx+0x18], 0x2803f488
7ffc0691e530  jnz 0x7ffc06910010	->0
7ffc0691e536  cmp dword [rdx+0x14], -0x0c
7ffc0691e53a  jnz 0x7ffc06910010	->0
7ffc0691e540  mov ecx, [rdx+0x10]
7ffc0691e543  call 0x7ffc1570de20	->lj_tab_len
7ffc0691e548  mov edx, [0x280104b4]
7ffc0691e54f  test eax, eax
7ffc0691e551  jg 0x7ffc06910014	->1
7ffc0691e557  mov esi, [rsi+0x8]
7ffc0691e55a  cmp dword [rsi+0x1c], +0x3f
7ffc0691e55e  jnz 0x7ffc06910018	->2
7ffc0691e564  mov esi, [rsi+0x14]
7ffc0691e567  mov rcx, 0xfffffffb28012e68
7ffc0691e571  cmp rcx, [rsi+0x470]
7ffc0691e578  jnz 0x7ffc06910018	->2
7ffc0691e57e  cmp dword [rsi+0x46c], -0x0c
7ffc0691e585  jnz 0x7ffc06910018	->2
7ffc0691e58b  mov esi, [rsi+0x468]
7ffc0691e591  cmp dword [rsi+0x1c], +0x0f
7ffc0691e595  jnz 0x7ffc06910018	->2
7ffc0691e59b  mov r15d, [rsi+0x14]
7ffc0691e59f  mov rsi, 0xfffffffb28014670
7ffc0691e5a9  cmp rsi, [r15+0x170]
7ffc0691e5b0  jnz 0x7ffc06910018	->2
7ffc0691e5b6  cmp dword [r15+0x16c], -0x09
7ffc0691e5be  jnz 0x7ffc06910018	->2
7ffc0691e5c4  cmp dword [rdx+0xc], -0x0c
7ffc0691e5c8  jnz 0x7ffc06910018	->2
7ffc0691e5ce  mov esi, [rdx+0x8]
7ffc0691e5d1  cmp dword [r15+0x168], 0x28014648
7ffc0691e5dc  jnz 0x7ffc06910018	->2
7ffc0691e5e2  mov ecx, esi
7ffc0691e5e4  call 0x7ffc1570de20	->lj_tab_len
7ffc0691e5e9  mov edx, [0x280104b4]
7ffc0691e5f0  add eax, +0x01
7ffc0691e5f3  cmp eax, [rsi+0x18]
7ffc0691e5f6  jnb 0x7ffc06910018	->2
7ffc0691e5fc  mov r15d, [rsi+0x8]
7ffc0691e600  mov dword [r15+rax*8+0x4], 0xfffffffb
7ffc0691e609  mov [r15+rax*8], ebp
7ffc0691e60d  test byte [rsi+0x4], 0x4
7ffc0691e611  jz 0x7ffc0691e628
7ffc0691e613  and byte [rsi+0x4], 0xfb
7ffc0691e617  mov ebp, [0x280103f4]
7ffc0691e61e  mov [0x280103f4], esi
7ffc0691e625  mov [rsi+0xc], ebp
7ffc0691e628  add edi, +0x01
7ffc0691e62b  cmp edi, ebx
7ffc0691e62d  jg 0x7ffc0691001c	->3
7ffc0691e633  xorps xmm7, xmm7
7ffc0691e636  cvtsi2sd xmm7, edi
7ffc0691e63a  movsd [rdx+0x40], xmm7
7ffc0691e63f  movsd [rdx+0x28], xmm7
7ffc0691e644  mov dword [rdx+0x24], 0xfffffffe
7ffc0691e64b  add rsp, +0x20
7ffc0691e64f  jmp 0x7ffc0691fd24
---- TRACE 13 stop -> 1

---- TRACE 14 start 12/2 tsukuyomi_tokenizer.lua:21
0006  . GGET     0   0      ; "table"
0007  . TGETS    0   0   1  ; "concat"
0008  . UGET     1   0      ; word_bucket
0009  . CALL     0   2   2
0000  . . FUNCC               ; table.concat
0010  . GGET     1   0      ; "table"
0011  . TGETS    1   1   2  ; "insert"
0012  . UGET     2   1      ; tokens
0013  . MOV      3   0
0014  . CALL     1   1   3
0000  . . FUNCC               ; table.insert
0015  . TNEW     1   0
0016  . USETV    0   1      ; word_bucket
0017  . RET0     0   1
0035  JMP     10 => 0055
0055  JFORL    5   1
---- TRACE 14 IR
0001    int SLOAD  #6    PI
0002    int SLOAD  #7    PRI
0003    str SLOAD  #10   PI
0004    tab FLOAD  tsukuyomi_tokenizer.lua:19  func.env
0005    int FLOAD  0004  tab.hmask
0006 >  int EQ     0005  +63 
0007    p32 FLOAD  0004  tab.node
0008 >  p32 HREFK  0007  "table" @47
0009 >  tab HLOAD  0008
0010    int FLOAD  0009  tab.hmask
0011 >  int EQ     0010  +15 
0012    p32 FLOAD  0009  tab.node
0013 >  p32 HREFK  0012  "concat" @14
0014 >  fun HLOAD  0013
0015 >  tab SLOAD  #3    T
0016 >  fun EQ     0014  table.concat
0017    int CALLL  lj_tab_len  (0015)
0018    p32 BUFHDR [0x28010414]  RESET
0023    p32 CALLL  lj_buf_puttab  (0018 0015 [NULL] +1   0017)
0024 >  p64 NE     0023  [NULL]
0025    str BUFSTR 0023  0018
0026 >  p32 HREFK  0012  "insert" @15
0027 >  fun HLOAD  0026
0028 >  tab SLOAD  #2    T
0029 >  fun EQ     0027  table.insert
0030    int CALLL  lj_tab_len  (0028)
0031    int ADD    0030  +1  
0032    int FLOAD  0028  tab.asize
0033 >  int ABC    0032  0031
0034    p32 FLOAD  0028  tab.array
0035    p32 AREF   0034  0031
0036    str ASTORE 0035  0025
0037    nil TBAR   0028
0038 >  tab TNEW   #0    #0  
0039    int ADD    0001  +1  
0040 >  int LE     0039  0002
0041    num CONV   0039  num.int
---- TRACE 14 mcode 486
7ffc0691e26c  mov dword [0x28010410], 0xe
7ffc0691e277  mov ecx, [0x280103d8]
7ffc0691e27e  cmp ecx, [0x280103dc]
7ffc0691e285  jb 0x7ffc0691e29e
7ffc0691e287  mov edx, 0x2
7ffc0691e28c  mov ecx, 0x280103b8
7ffc0691e291  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691e296  test eax, eax
7ffc0691e298  jnz 0x7ffc06910010	->0
7ffc0691e29e  mov edx, [0x280104b4]
7ffc0691e2a5  mov esi, [0x2803f490]
7ffc0691e2ac  cmp dword [rsi+0x1c], +0x3f
7ffc0691e2b0  jnz 0x7ffc06910010	->0
7ffc0691e2b6  mov esi, [rsi+0x14]
7ffc0691e2b9  mov rcx, 0xfffffffb28012e68
7ffc0691e2c3  cmp rcx, [rsi+0x470]
7ffc0691e2ca  jnz 0x7ffc06910010	->0
7ffc0691e2d0  cmp dword [rsi+0x46c], -0x0c
7ffc0691e2d7  jnz 0x7ffc06910010	->0
7ffc0691e2dd  mov esi, [rsi+0x468]
7ffc0691e2e3  cmp dword [rsi+0x1c], +0x0f
7ffc0691e2e7  jnz 0x7ffc06910010	->0
7ffc0691e2ed  mov r15d, [rsi+0x14]
7ffc0691e2f1  mov rsi, 0xfffffffb280147d0
7ffc0691e2fb  cmp rsi, [r15+0x158]
7ffc0691e302  jnz 0x7ffc06910010	->0
7ffc0691e308  cmp dword [r15+0x154], -0x09
7ffc0691e310  jnz 0x7ffc06910010	->0
7ffc0691e316  cmp dword [rdx+0x14], -0x0c
7ffc0691e31a  jnz 0x7ffc06910010	->0
7ffc0691e320  mov ecx, [rdx+0x10]
7ffc0691e323  mov [rsp+0x2c], ecx
7ffc0691e327  cmp dword [r15+0x150], 0x280147a8
7ffc0691e332  jnz 0x7ffc06910010	->0
7ffc0691e338  call 0x7ffc1570de20	->lj_tab_len
7ffc0691e33d  mov edx, [rsp+0x2c]
7ffc0691e341  mov ecx, 0x28010414
7ffc0691e346  mov esi, [rcx+0x8]
7ffc0691e349  mov [rcx], esi
7ffc0691e34b  mov [rsp+0x20], rax
7ffc0691e350  mov r9d, 0x1
7ffc0691e356  xor r8d, r8d
7ffc0691e359  call 0x7ffc156d6660	->lj_buf_puttab
7ffc0691e35e  mov ecx, eax
7ffc0691e360  test rcx, rcx
7ffc0691e363  jz 0x7ffc06910010	->0
7ffc0691e369  call 0x7ffc156d6880	->lj_buf_tostr
7ffc0691e36e  mov [rsp+0x28], eax
7ffc0691e372  mov edx, [0x280104b4]
7ffc0691e379  mov rsi, 0xfffffffb28014670
7ffc0691e383  cmp rsi, [r15+0x170]
7ffc0691e38a  jnz 0x7ffc06910010	->0
7ffc0691e390  cmp dword [r15+0x16c], -0x09
7ffc0691e398  jnz 0x7ffc06910010	->0
7ffc0691e39e  cmp dword [rdx+0xc], -0x0c
7ffc0691e3a2  jnz 0x7ffc06910010	->0
7ffc0691e3a8  mov esi, [rdx+0x8]
7ffc0691e3ab  cmp dword [r15+0x168], 0x28014648
7ffc0691e3b6  jnz 0x7ffc06910010	->0
7ffc0691e3bc  mov ecx, esi
7ffc0691e3be  call 0x7ffc1570de20	->lj_tab_len
7ffc0691e3c3  mov r15d, eax
7ffc0691e3c6  mov ecx, [0x280104b0]
7ffc0691e3cd  mov eax, [rsp+0x28]
7ffc0691e3d1  mov r14d, r15d
7ffc0691e3d4  add r14d, +0x01
7ffc0691e3d8  cmp r14d, [rsi+0x18]
7ffc0691e3dc  jnb 0x7ffc06910010	->0
7ffc0691e3e2  mov r15d, [rsi+0x8]
7ffc0691e3e6  mov dword [r15+r14*8+0x4], 0xfffffffb
7ffc0691e3ef  mov [r15+r14*8], eax
7ffc0691e3f3  test byte [rsi+0x4], 0x4
7ffc0691e3f7  jz 0x7ffc0691e40e
7ffc0691e3f9  and byte [rsi+0x4], 0xfb
7ffc0691e3fd  mov edx, [0x280103f4]
7ffc0691e404  mov [0x280103f4], esi
7ffc0691e40b  mov [rsi+0xc], edx
7ffc0691e40e  xor edx, edx
7ffc0691e410  call 0x7ffc1570df10	->lj_tab_new1
7ffc0691e415  mov edx, [0x280104b4]
7ffc0691e41c  add edi, +0x01
7ffc0691e41f  cmp edi, ebx
7ffc0691e421  jg 0x7ffc06910018	->2
7ffc0691e427  xorps xmm7, xmm7
7ffc0691e42a  cvtsi2sd xmm7, edi
7ffc0691e42e  movsd [rdx+0x40], xmm7
7ffc0691e433  movsd [rdx+0x28], xmm7
7ffc0691e438  mov dword [rdx+0x24], 0xfffffffe
7ffc0691e43f  mov dword [rdx+0x14], 0xfffffff4
7ffc0691e446  mov [rdx+0x10], eax
7ffc0691e449  add rsp, +0x20
7ffc0691e44d  jmp 0x7ffc0691fd24
---- TRACE 14 stop -> 1

---- TRACE 15 start 12/1 tsukuyomi_tokenizer.lua:25
0017  . RET0     0   1
0035  JMP     10 => 0055
0055  JFORL    5   1
0056  MOV      5   3
0057  CALL     5   1   1
0000  . FUNCF    4          ; tsukuyomi_tokenizer.lua:19
0001  . UGET     0   0      ; word_bucket
0002  . LEN      0   0
0003  . KSHORT   1   0
0004  . ISGE     1   0
0005  . JMP      0 => 0017
0017  . RET0     0   1
0058  UCLO     0 => 0059
---- TRACE 15 abort tsukuyomi_tokenizer.lua:50 -- NYI: bytecode 50

---- TRACE 15 start 9/3 tsukuyomi_reader.lua:75
0105  KNIL    17  18
0106  ISF         16
0107  JMP     19 => 0126
0126  MOV     18  14
0127  GGET    19   0      ; "tsukuyomi"
0128  TGETS   19  19  19  ; "create_symbol"
0129  MOV     20  18
0130  MOV     21  17
0131  CALL    19   2   3
0000  . FUNCF    8          ; tsukuyomi_symbol.lua:21
0001  . KPRI     2   0
0002  . ISF          1
0003  . JMP      3 => 0009
0009  . MOV      2   0
0010  . UGET     3   0      ; kSymbolCache
0011  . TGETV    3   3   2
0012  . ISF          3
0013  . JMP      4 => 0015
0014  . RET1     3   2
0132  MOV     15  19
0133  MOV     16   7
0134  MOV     17  15
0135  MOV     18   8
0136  CALL    16   1   3
0000  . FUNCF    7          ; tsukuyomi_reader.lua:15
0001  . ISF          1
0002  . JMP      2 => 0014
0014  . UGET     2   0      ; prev_cell
0015  . ISNEP    2   0
0016  . JMP      2 => 0035
0035  . UGET     2   0      ; prev_cell
0036  . TGETB    2   2   1
0037  . ISNEP    2   0
0038  . JMP      2 => 0042
0039  . UGET     2   0      ; prev_cell
0040  . TSETB    0   2   1
0041  . JMP      2 => 0050
0050  . RET0     0   1
0137  KPRI     8   1
0138  JFORL   10   8
---- TRACE 15 IR
0001 >  str SLOAD  #15   T
0002    fun SLOAD  #0    R
0003    tab FLOAD  0002  func.env
0004    int FLOAD  0003  tab.hmask
0005 >  int EQ     0004  +63 
0006    p32 FLOAD  0003  tab.node
0007 >  p32 HREFK  0006  "tsukuyomi" @33
0008 >  tab HLOAD  0007
0009    int FLOAD  0008  tab.hmask
0010 >  int EQ     0009  +31 
0011    p32 FLOAD  0008  tab.node
0012 >  p32 HREFK  0011  "create_symbol" @21
0013 >  fun HLOAD  0012
0014 >  fun EQ     0013  tsukuyomi_symbol.lua:21
0015 >  p32 UREFC  tsukuyomi_symbol.lua:21  #0  
0016 >  tab ULOAD  0015
0017    p32 HREF   0016  0001
0018 >  tab HLOAD  0017
0019 >  fun SLOAD  #8    T
0020 >  fal SLOAD  #9    T
0021 >  fun EQ     0019  tsukuyomi_reader.lua:15
0022 >  tab SLOAD  #7    T
0023    int FLOAD  0022  tab.asize
0024 >  int ABC    0023  +1  
0025    p32 FLOAD  0022  tab.array
0026    p32 AREF   0025  +1  
0027 >  nil ALOAD  0026
0028    tab FLOAD  0022  tab.meta
0029 >  tab NE     0028  [NULL]
0030    int FLOAD  0028  tab.hmask
0031 >  int EQ     0030  +0  
0032    tab ASTORE 0026  0018
0033    nil TBAR   0022
0034    num SLOAD  #12   RI
0035    num SLOAD  #11   I
0036    num ADD    0035  +1  
0037 >  num LE     0036  0034
---- TRACE 15 mcode 412
7ffc0691e0c9  mov dword [0x28010410], 0xf
7ffc0691e0d4  mov edx, [0x280104b4]
7ffc0691e0db  movsd xmm15, [0x280488d0]
7ffc0691e0e5  cmp dword [rdx+0x74], -0x05
7ffc0691e0e9  jnz 0x7ffc06910010	->0
7ffc0691e0ef  mov ebp, [rdx+0x70]
7ffc0691e0f2  mov edi, [rdx-0x8]
7ffc0691e0f5  mov edi, [rdi+0x8]
7ffc0691e0f8  cmp dword [rdi+0x1c], +0x3f
7ffc0691e0fc  jnz 0x7ffc06910010	->0
7ffc0691e102  mov edi, [rdi+0x14]
7ffc0691e105  mov rsi, 0xfffffffb28017d58
7ffc0691e10f  cmp rsi, [rdi+0x320]
7ffc0691e116  jnz 0x7ffc06910010	->0
7ffc0691e11c  cmp dword [rdi+0x31c], -0x0c
7ffc0691e123  jnz 0x7ffc06910010	->0
7ffc0691e129  mov edi, [rdi+0x318]
7ffc0691e12f  cmp dword [rdi+0x1c], +0x1f
7ffc0691e133  jnz 0x7ffc06910010	->0
7ffc0691e139  mov edi, [rdi+0x14]
7ffc0691e13c  mov rsi, 0xfffffffb28024418
7ffc0691e146  cmp rsi, [rdi+0x200]
7ffc0691e14d  jnz 0x7ffc06910010	->0
7ffc0691e153  cmp dword [rdi+0x1fc], -0x09
7ffc0691e15a  jnz 0x7ffc06910010	->0
7ffc0691e160  cmp dword [rdi+0x1f8], 0x2802b530
7ffc0691e16a  jnz 0x7ffc06910010	->0
7ffc0691e170  cmp dword [0x2802b564], -0x0c
7ffc0691e178  jnz 0x7ffc06910010	->0
7ffc0691e17e  mov esi, [0x2802b560]
7ffc0691e185  mov edi, [rsi+0x1c]
7ffc0691e188  and edi, [rbp+0x8]
7ffc0691e18b  lea edi, [rdi+rdi*2]
7ffc0691e18e  shl edi, 0x03
7ffc0691e191  add edi, [rsi+0x14]
7ffc0691e194  cmp dword [rdi+0xc], -0x05
7ffc0691e198  jnz 0x7ffc0691e19f
7ffc0691e19a  cmp ebp, [rdi+0x8]
7ffc0691e19d  jz 0x7ffc0691e1ab
7ffc0691e19f  mov edi, [rdi+0x10]
7ffc0691e1a2  test edi, edi
7ffc0691e1a4  jnz 0x7ffc0691e194
7ffc0691e1a6  mov edi, 0x28010458
7ffc0691e1ab  cmp dword [rdi+0x4], -0x0c
7ffc0691e1af  jnz 0x7ffc06910010	->0
7ffc0691e1b5  mov esi, [rdi]
7ffc0691e1b7  cmp dword [rdx+0x3c], -0x09
7ffc0691e1bb  jnz 0x7ffc06910010	->0
7ffc0691e1c1  cmp dword [rdx+0x44], -0x02
7ffc0691e1c5  jnz 0x7ffc06910010	->0
7ffc0691e1cb  cmp dword [rdx+0x38], 0x28079c38
7ffc0691e1d2  jnz 0x7ffc06910010	->0
7ffc0691e1d8  cmp dword [rdx+0x34], -0x0c
7ffc0691e1dc  jnz 0x7ffc06910010	->0
7ffc0691e1e2  mov edi, [rdx+0x30]
7ffc0691e1e5  cmp dword [rdi+0x18], +0x01
7ffc0691e1e9  jbe 0x7ffc06910014	->1
7ffc0691e1ef  mov ebp, [rdi+0x8]
7ffc0691e1f2  cmp dword [rbp+0xc], -0x01
7ffc0691e1f6  jnz 0x7ffc06910014	->1
7ffc0691e1fc  mov ebx, [rdi+0x10]
7ffc0691e1ff  test ebx, ebx
7ffc0691e201  jz 0x7ffc06910014	->1
7ffc0691e207  cmp dword [rbx+0x1c], +0x00
7ffc0691e20b  jnz 0x7ffc06910014	->1
7ffc0691e211  mov dword [rbp+0xc], 0xfffffff4
7ffc0691e218  mov [rbp+0x8], esi
7ffc0691e21b  test byte [rdi+0x4], 0x4
7ffc0691e21f  jz 0x7ffc0691e236
7ffc0691e221  and byte [rdi+0x4], 0xfb
7ffc0691e225  mov esi, [0x280103f4]
7ffc0691e22c  mov [0x280103f4], edi
7ffc0691e233  mov [rdi+0xc], esi
7ffc0691e236  movsd xmm6, [rdx+0x58]
7ffc0691e23b  movsd xmm7, [rdx+0x50]
7ffc0691e240  addsd xmm7, xmm15
7ffc0691e245  ucomisd xmm6, xmm7
7ffc0691e249  jb 0x7ffc06910018	->2
7ffc0691e24f  movsd [rdx+0x68], xmm7
7ffc0691e254  movsd [rdx+0x50], xmm7
7ffc0691e259  mov dword [rdx+0x44], 0xfffffffe
7ffc0691e260  jmp 0x7ffc0691f1d5
---- TRACE 15 stop -> 8

---- TRACE 16 start 10/4 builtin:remove
0030  . RET0     0   1
0054  MOV      6  16
0055  MOV     16   7
0056  MOV     17  15
0057  TGETV   18   9  15
0058  CALL    16   1   3
0000  . FUNCF    7          ; tsukuyomi_reader.lua:15
0001  . ISF          1
0002  . JMP      2 => 0014
0014  . UGET     2   0      ; prev_cell
0015  . ISNEP    2   0
0016  . JMP      2 => 0035
0017  . UGET     2   1      ; data_list
0018  . TGETB    2   2   1
0019  . ISNEP    2   0
0020  . JMP      2 => 0024
0024  . UGET     2   1      ; data_list
0025  . GGET     3   0      ; "tsukuyomi"
0026  . TGETS    3   3   1  ; "create_cell"
0027  . MOV      4   0
0028  . KPRI     5   0
0029  . CALL     3   2   3
0000  . . FUNCF    6          ; tsukuyomi_cons_cell.lua:4
0001  . . TNEW     2   3
0002  . . TSETB    0   2   1
0003  . . TSETB    1   2   2
0004  . . GGET     3   0      ; "setmetatable"
0005  . . MOV      4   2
0006  . . UGET     5   0      ; kCellTag
0007  . . CALL     3   1   3
0000  . . . FUNCC               ; setmetatable
0008  . . RET1     2   2
0030  . TSETB    3   2   2
0031  . UGET     2   1      ; data_list
0032  . TGETB    2   2   2
0033  . USETV    1   2      ; data_list
0034  . JMP      2 => 0050
0050  . RET0     0   1
0059  KPRI    16   0
0060  TSETV   16   9  15
0061  JMP     15 => 0138
0138  JFORL   10   8
0139  UCLO     0 => 0140
---- TRACE 16 abort tsukuyomi_reader.lua:91 -- NYI: bytecode 50

---- TRACE 16 start tsukuyomi_ir_compiler.lua:82
0249  MOV      2   4
---- TRACE 16 abort tsukuyomi_ir_compiler.lua:174 -- leaving loop in root trace

---- TRACE 16 start tsukuyomi_symbol.lua:43
0001  TGETS    1   0   0  ; "name"
0002  RET1     1   2
---- TRACE 16 IR
0001 >  tab SLOAD  #1    T
0002    int FLOAD  0001  tab.hmask
0003 >  int EQ     0002  +1  
0004    p32 FLOAD  0001  tab.node
0005 >  p32 HREFK  0004  "name" @0
0006 >  str HLOAD  0005
---- TRACE 16 mcode 95
7ffc0691e063  mov dword [0x28010410], 0x10
7ffc0691e06e  cmp dword [rdx+0x4], -0x0c
7ffc0691e072  jnz 0x7ffc06910010	->0
7ffc0691e078  mov edi, [rdx]
7ffc0691e07a  cmp dword [rdi+0x1c], +0x01
7ffc0691e07e  jnz 0x7ffc06910010	->0
7ffc0691e084  mov edi, [rdi+0x14]
7ffc0691e087  mov rsi, 0xfffffffb28021568
7ffc0691e091  cmp rsi, [rdi+0x8]
7ffc0691e095  jnz 0x7ffc06910010	->0
7ffc0691e09b  cmp dword [rdi+0x4], -0x05
7ffc0691e09f  jnz 0x7ffc06910010	->0
7ffc0691e0a5  mov edi, [rdi]
7ffc0691e0a7  mov dword [rdx+0xc], 0xfffffffb
7ffc0691e0ae  mov [rdx+0x8], edi
7ffc0691e0b1  xor eax, eax
7ffc0691e0b3  mov esi, 0x2801e938
7ffc0691e0b8  mov ebx, 0x28010f98
7ffc0691e0bd  jmp 0x7ffc156c4388
---- TRACE 16 stop -> return

---- TRACE 17 start tsukuyomi_ir_compiler.lua:33
0001  GGET     2   0      ; "tsukuyomi"
0002  TGETS    2   2   1  ; "get_symbol_namespace"
0003  MOV      3   1
0004  CALL     2   2   2
0000  . FUNCF    2          ; tsukuyomi_symbol.lua:47
0001  . TGETS    1   0   0  ; "namespace"
0002  . RET1     1   2
0005  ISF          2
0006  JMP      3 => 0008
0008  KPRI     2   0
0009  GGET     3   0      ; "tsukuyomi"
0010  TGETS    3   3   2  ; "get_symbol_name"
0011  MOV      4   0
0012  CALL     3   2   2
0000  . JFUNCF   2  16         ; tsukuyomi_symbol.lua:43
0001  . TGETS    1   0   0  ; "name"
0002  . RET1     1   2
0013  GGET     4   0      ; "tsukuyomi"
0014  TGETS    4   4   3  ; "core"
0015  TGETV    4   4   3
0016  ISF          4
0017  JMP      5 => 0020
0020  MOV      2   1
0021  GGET     4   0      ; "tsukuyomi"
0022  TGETS    4   4   4  ; "create_symbol"
0023  MOV      5   3
0024  MOV      6   2
0025  CALLT    4   3
0000  FUNCF    8          ; tsukuyomi_symbol.lua:21
0001  KPRI     2   0
0002  ISF          1
0003  JMP      3 => 0009
0004  MOV      3   1
0005  KSTR     4   0      ; "/"
0006  MOV      5   0
0007  CAT      2   3   5
0008  JMP      3 => 0010
0010  UGET     3   0      ; kSymbolCache
0011  TGETV    3   3   2
0012  ISF          3
0013  JMP      4 => 0015
0014  RET1     3   2
---- TRACE 17 IR
0001    fun SLOAD  #0    R
0002    tab FLOAD  0001  func.env
0003    int FLOAD  0002  tab.hmask
0004 >  int EQ     0003  +63 
0005    p32 FLOAD  0002  tab.node
0006 >  p32 HREFK  0005  "tsukuyomi" @33
0007 >  tab HLOAD  0006
0008    int FLOAD  0007  tab.hmask
0009 >  int EQ     0008  +31 
0010    p32 FLOAD  0007  tab.node
0011 >  p32 HREFK  0010  "get_symbol_namespace" @23
0012 >  fun HLOAD  0011
0013 >  str SLOAD  #2    T
0014 >  fun EQ     0012  tsukuyomi_symbol.lua:47
0015    int FLOAD  {0x28015d68}  tab.hmask
0016 >  int EQ     0015  +1  
0017    p32 FLOAD  {0x28015d68}  tab.node
0018 >  p32 HREFK  0017  "__index" @1
0019 >  tab HLOAD  0018
0020    p32 HREF   0019  "namespace"
0021 >  p32 EQ     0020  [0x28010458]
0022    tab FLOAD  0019  tab.meta
0023 >  tab EQ     0022  [NULL]
0024 >  p32 HREFK  0010  "get_symbol_name" @30
0025 >  fun HLOAD  0024
0026 >  tab SLOAD  #1    T
0027 >  fun EQ     0025  tsukuyomi_symbol.lua:43
0028    int FLOAD  0026  tab.hmask
0029 >  int EQ     0028  +1  
0030    p32 FLOAD  0026  tab.node
0031 >  p32 HREFK  0030  "name" @0
0032 >  str HLOAD  0031
0033 >  p32 HREFK  0010  "core" @18
0034 >  tab HLOAD  0033
0035    p32 HREF   0034  0032
0036 >  p32 EQ     0035  [0x28010458]
0037    tab FLOAD  0034  tab.meta
0038 >  tab EQ     0037  [NULL]
0039 >  p32 HREFK  0010  "create_symbol" @21
0040 >  fun HLOAD  0039
0041 >  fun EQ     0040  tsukuyomi_symbol.lua:21
0042    p32 BUFHDR [0x28010414]  RESET
0043    p32 BUFPUT 0042  0013
0044    p32 BUFPUT 0043  "/" 
0045    p32 BUFPUT 0044  0032
0046    str BUFSTR 0045  0042
0047 >  p32 UREFC  tsukuyomi_symbol.lua:21  #0  
0048 >  tab ULOAD  0047
0049    p32 HREF   0048  0046
0050 >  tab HLOAD  0049
---- TRACE 17 mcode 740
7ffc0691dd7c  add rsp, -0x10
7ffc0691dd80  mov dword [0x28010410], 0x11
7ffc0691dd8b  mov esi, edx
7ffc0691dd8d  mov ecx, [0x280103d8]
7ffc0691dd94  cmp ecx, [0x280103dc]
7ffc0691dd9b  jb 0x7ffc0691ddb4
7ffc0691dd9d  mov edx, 0x1
7ffc0691dda2  mov ecx, 0x280103b8
7ffc0691dda7  call 0x7ffc156f01e0	->lj_gc_step_jit
7ffc0691ddac  test eax, eax
7ffc0691ddae  jnz 0x7ffc06910010	->0
7ffc0691ddb4  mov edi, [rsi-0x8]
7ffc0691ddb7  mov edi, [rdi+0x8]
7ffc0691ddba  cmp dword [rdi+0x1c], +0x3f
7ffc0691ddbe  jnz 0x7ffc06910010	->0
7ffc0691ddc4  mov edi, [rdi+0x14]
7ffc0691ddc7  mov rbp, 0xfffffffb28017d58
7ffc0691ddd1  cmp rbp, [rdi+0x320]
7ffc0691ddd8  jnz 0x7ffc06910010	->0
7ffc0691ddde  cmp dword [rdi+0x31c], -0x0c
7ffc0691dde5  jnz 0x7ffc06910010	->0
7ffc0691ddeb  mov edi, [rdi+0x318]
7ffc0691ddf1  cmp dword [rdi+0x1c], +0x1f
7ffc0691ddf5  jnz 0x7ffc06910010	->0
7ffc0691ddfb  mov edi, [rdi+0x14]
7ffc0691ddfe  mov rbp, 0xfffffffb2801d7d0
7ffc0691de08  cmp rbp, [rdi+0x230]
7ffc0691de0f  jnz 0x7ffc06910010	->0
7ffc0691de15  cmp dword [rdi+0x22c], -0x09
7ffc0691de1c  jnz 0x7ffc06910010	->0
7ffc0691de22  cmp dword [rsi+0xc], -0x05
7ffc0691de26  jnz 0x7ffc06910010	->0
7ffc0691de2c  mov edx, [rsi+0x8]
7ffc0691de2f  cmp dword [rdi+0x228], 0x2802b5b8
7ffc0691de39  jnz 0x7ffc06910010	->0
7ffc0691de3f  cmp dword [0x28015d84], +0x01
7ffc0691de47  jnz 0x7ffc06910010	->0
7ffc0691de4d  mov ebp, [0x28015d7c]
7ffc0691de54  mov rbx, 0xfffffffb28012458
7ffc0691de5e  cmp rbx, [rbp+0x20]
7ffc0691de62  jnz 0x7ffc06910010	->0
7ffc0691de68  cmp dword [rbp+0x1c], -0x0c
7ffc0691de6c  jnz 0x7ffc06910010	->0
7ffc0691de72  mov ebp, [rbp+0x18]
7ffc0691de75  mov ebx, [rbp+0x1c]
7ffc0691de78  and ebx, 0x3b0c1ec7
7ffc0691de7e  lea ebx, [rbx+rbx*2]
7ffc0691de81  shl ebx, 0x03
7ffc0691de84  add ebx, [rbp+0x14]
7ffc0691de87  cmp dword [rbx+0xc], -0x05
7ffc0691de8b  jnz 0x7ffc0691de9a
7ffc0691de8d  cmp dword [rbx+0x8], 0x2801ea08
7ffc0691de94  jz 0x7ffc06910010	->0
7ffc0691de9a  mov ebx, [rbx+0x10]
7ffc0691de9d  test ebx, ebx
7ffc0691de9f  jnz 0x7ffc0691de87
7ffc0691dea1  cmp dword [rbp+0x10], +0x00
7ffc0691dea5  jnz 0x7ffc06910010	->0
7ffc0691deab  mov rbp, 0xfffffffb2801d780
7ffc0691deb5  cmp rbp, [rdi+0x2d8]
7ffc0691debc  jnz 0x7ffc06910010	->0
7ffc0691dec2  cmp dword [rdi+0x2d4], -0x09
7ffc0691dec9  jnz 0x7ffc06910010	->0
7ffc0691decf  cmp dword [rsi+0x4], -0x0c
7ffc0691ded3  jnz 0x7ffc06910010	->0
7ffc0691ded9  mov esi, [rsi]
7ffc0691dedb  cmp dword [rdi+0x2d0], 0x2802b598
7ffc0691dee5  jnz 0x7ffc06910010	->0
7ffc0691deeb  cmp dword [rsi+0x1c], +0x01
7ffc0691deef  jnz 0x7ffc06910010	->0
7ffc0691def5  mov esi, [rsi+0x14]
7ffc0691def8  mov rbp, 0xfffffffb28021568
7ffc0691df02  cmp rbp, [rsi+0x8]
7ffc0691df06  jnz 0x7ffc06910010	->0
7ffc0691df0c  cmp dword [rsi+0x4], -0x05
7ffc0691df10  jnz 0x7ffc06910010	->0
7ffc0691df16  mov ebx, [rsi]
7ffc0691df18  mov [rsp+0x20], ebx
7ffc0691df1c  mov rsi, 0xfffffffb28024630
7ffc0691df26  cmp rsi, [rdi+0x1b8]
7ffc0691df2d  jnz 0x7ffc06910010	->0
7ffc0691df33  cmp dword [rdi+0x1b4], -0x0c
7ffc0691df3a  jnz 0x7ffc06910010	->0
7ffc0691df40  mov esi, [rdi+0x1b0]
7ffc0691df46  mov ebp, [rsi+0x1c]
7ffc0691df49  and ebp, [rbx+0x8]
7ffc0691df4c  lea ebp, [rbp+rbp*2+0x0]
7ffc0691df50  shl ebp, 0x03
7ffc0691df53  add ebp, [rsi+0x14]
7ffc0691df56  cmp dword [rbp+0xc], -0x05
7ffc0691df5a  jnz 0x7ffc0691df65
7ffc0691df5c  cmp ebx, [rbp+0x8]
7ffc0691df5f  jz 0x7ffc06910010	->0
7ffc0691df65  mov ebp, [rbp+0x10]
7ffc0691df68  test ebp, ebp
7ffc0691df6a  jnz 0x7ffc0691df56
7ffc0691df6c  cmp dword [rsi+0x10], +0x00
7ffc0691df70  jnz 0x7ffc06910010	->0
7ffc0691df76  mov rsi, 0xfffffffb28024418
7ffc0691df80  cmp rsi, [rdi+0x200]
7ffc0691df87  jnz 0x7ffc06910010	->0
7ffc0691df8d  cmp dword [rdi+0x1fc], -0x09
7ffc0691df94  jnz 0x7ffc06910010	->0
7ffc0691df9a  cmp dword [rdi+0x1f8], 0x2802b530
7ffc0691dfa4  jnz 0x7ffc06910010	->0
7ffc0691dfaa  mov ecx, 0x28010414
7ffc0691dfaf  mov edi, [rcx+0x8]
7ffc0691dfb2  mov [rcx], edi
7ffc0691dfb4  call 0x7ffc156d6380	->lj_buf_putstr
7ffc0691dfb9  mov ecx, eax
7ffc0691dfbb  mov edx, 0x2f
7ffc0691dfc0  call 0x7ffc156d62c0	->lj_buf_putchar
7ffc0691dfc5  mov ecx, eax
7ffc0691dfc7  mov edx, [rsp+0x20]
7ffc0691dfcb  call 0x7ffc156d6380	->lj_buf_putstr
7ffc0691dfd0  mov ecx, eax
7ffc0691dfd2  call 0x7ffc156d6880	->lj_buf_tostr
7ffc0691dfd7  mov edx, [0x280104b4]
7ffc0691dfde  cmp dword [0x2802b564], -0x0c
7ffc0691dfe6  jnz 0x7ffc06910010	->0
7ffc0691dfec  mov esi, [0x2802b560]
7ffc0691dff3  mov edi, [rsi+0x1c]
7ffc0691dff6  and edi, [rax+0x8]
7ffc0691dff9  lea edi, [rdi+rdi*2]
7ffc0691dffc  shl edi, 0x03
7ffc0691dfff  add edi, [rsi+0x14]
7ffc0691e002  cmp dword [rdi+0xc], -0x05
7ffc0691e006  jnz 0x7ffc0691e00d
7ffc0691e008  cmp eax, [rdi+0x8]
7ffc0691e00b  jz 0x7ffc0691e019
7ffc0691e00d  mov edi, [rdi+0x10]
7ffc0691e010  test edi, edi
7ffc0691e012  jnz 0x7ffc0691e002
7ffc0691e014  mov edi, 0x28010458
7ffc0691e019  cmp dword [rdi+0x4], -0x0c
7ffc0691e01d  jnz 0x7ffc06910010	->0
7ffc0691e023  mov edi, [rdi]
7ffc0691e025  mov eax, [0x280104b0]
7ffc0691e02c  mov eax, [rax+0x20]
7ffc0691e02f  sub eax, edx
7ffc0691e031  cmp eax, +0x40
7ffc0691e034  jb 0x7ffc06910014	->1
7ffc0691e03a  mov dword [rdx+0x1c], 0xfffffff4
7ffc0691e041  mov [rdx+0x18], edi
7ffc0691e044  mov dword [rdx-0x8], 0x2802b530
7ffc0691e04b  xor eax, eax
7ffc0691e04d  mov esi, 0x2802ab40
7ffc0691e052  mov ebx, 0x28010f98
7ffc0691e057  add rsp, +0x10
7ffc0691e05b  jmp 0x7ffc156c4388
---- TRACE 17 stop -> return

NOP 
SYMBOL user/list1 <- DATA table: 0x2805a6e8
VAR __Var2 <- CALL core/car, user/list1
CALL core/print, __Var2
VAR __Var3 <- CALL core/cdr, user/list1
CALL core/print, __Var3
VAR __Var4 <- CALL core/cadr, user/list1
CALL core/print, __Var4
VAR __Var5 <- CALL core/first, user/list1
CALL core/print, __Var5
VAR __Var6 <- CALL core/rest, user/list1
CALL core/print, __Var6
VAR __Var8 <- CALL core/rest, user/list1
VAR __Var7 <- CALL core/first, __Var8
CALL core/print, __Var7
*** compiler output ***

tsukuyomi.user.list1 = tsukuyomi._consume_data(0)
local __Var2 = tsukuyomi.core.car(tsukuyomi.user.list1)
tsukuyomi.core.print(__Var2)
local __Var3 = tsukuyomi.core.cdr(tsukuyomi.user.list1)
tsukuyomi.core.print(__Var3)
local __Var4 = tsukuyomi.core.cadr(tsukuyomi.user.list1)
tsukuyomi.core.print(__Var4)
local __Var5 = tsukuyomi.core.first(tsukuyomi.user.list1)
tsukuyomi.core.print(__Var5)
local __Var6 = tsukuyomi.core.rest(tsukuyomi.user.list1)
tsukuyomi.core.print(__Var6)
local __Var8 = tsukuyomi.core.rest(tsukuyomi.user.list1)
local __Var7 = tsukuyomi.core.first(__Var8)
tsukuyomi.core.print(__Var7)

*** load ***

1
table: 0x2805a768
2
1
table: 0x2805a768
2

